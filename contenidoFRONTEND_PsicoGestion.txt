

/.env:
--------------------------------------------------------------------------------
PORT=3001
BROWSER=none

/package.json:
--------------------------------------------------------------------------------
{
  "name": "frontend-psico",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.22.0",
    "axios": "^1.6.0",
    "react-icons": "^4.12.0",
    "date-fns": "^2.30.0"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject",
    "dev": "react-scripts start --no-lazy"
  },
  "devDependencies": {
    "react-scripts": "5.0.1"
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}

/src\App.js:
--------------------------------------------------------------------------------
import React from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import { AuthProvider } from './context/AuthContext';
import Login from './components/Auth/Login';
import RoleRouter from './components/Auth/RoleRouter';

// P√°ginas para Becarios
import BecarioDashboard from './pages/becario/DashboardPage';
import BecarioCitas from './pages/becario/CitasPage';
import BecarioPacientes from './pages/becario/PacientesPage';
import BecarioNotificaciones from './pages/becario/NotificacionesPage';
import BecarioObservaciones from './pages/becario/ObservacionesPage';

// P√°ginas para Psic√≥logos
import PsicologoDashboard from './pages/psicologo/DashboardPage';
import PsicologoPacientes from './pages/psicologo/PacientesPage';
import PsicologoCitas from './pages/psicologo/CitasPage';
import PsicologoExpedientes from './pages/psicologo/ExpedientesPage';
import PsicologoSesiones from './pages/psicologo/SesionesPage';
import PsicologoSupervision from './pages/psicologo/SupervisionPage';

// P√°ginas para Coordinadores
import CoordinadorDashboard from './pages/coordinador/DashboardPage';
import CoordinadorUsuarios from './pages/coordinador/UsuariosPage';
import CoordinadorPacientes from './pages/coordinador/PacientesPage';
import CoordinadorAsignaciones from './pages/coordinador/AsignacionesPage';
import CoordinadorAgenda from './pages/coordinador/AgendaPage';
import CoordinadorReportes from './pages/coordinador/ReportesPage';
import CoordinadorAltas from './pages/coordinador/AltasPage';
import CoordinadorConfiguracion from './pages/coordinador/ConfiguracionPage';

function App() {
  return (
    <Router>
      <AuthProvider>
        <Routes>
          <Route path="/login" element={<Login />} />
          
          {/* Rutas de Becario */}
          <Route path="/" element={<RoleRouter />}>
            <Route index element={<BecarioDashboard />} />
            
            {/* Becario */}
            <Route path="becario/dashboard" element={<BecarioDashboard />} />
            <Route path="becario/citas" element={<BecarioCitas />} />
            <Route path="becario/pacientes" element={<BecarioPacientes />} />
            <Route path="becario/notificaciones" element={<BecarioNotificaciones />} />
            <Route path="becario/observaciones" element={<BecarioObservaciones />} />
            
            {/* Psic√≥logo */}
            <Route path="psicologo/dashboard" element={<PsicologoDashboard />} />
            <Route path="psicologo/pacientes" element={<PsicologoPacientes />} />
            <Route path="psicologo/citas" element={<PsicologoCitas />} />
            <Route path="psicologo/expedientes" element={<PsicologoExpedientes />} />
            <Route path="psicologo/sesiones" element={<PsicologoSesiones />} />
            <Route path="psicologo/supervision" element={<PsicologoSupervision />} />
            
            {/* Coordinador */}
            <Route path="coordinador/dashboard" element={<CoordinadorDashboard />} />
            <Route path="coordinador/usuarios" element={<CoordinadorUsuarios />} />
            <Route path="coordinador/pacientes" element={<CoordinadorPacientes />} />
            <Route path="coordinador/asignaciones" element={<CoordinadorAsignaciones />} />
            <Route path="coordinador/agenda" element={<CoordinadorAgenda />} />
            <Route path="coordinador/reportes" element={<CoordinadorReportes />} />
            <Route path="coordinador/altas" element={<CoordinadorAltas />} />
            <Route path="coordinador/configuracion" element={<CoordinadorConfiguracion />} />
          </Route>
          
          {/* Redirecci√≥n por defecto */}
          <Route path="*" element={<Navigate to="/" />} />
        </Routes>
      </AuthProvider>
    </Router>
  );
}

export default App;

/src\index.js:
--------------------------------------------------------------------------------
import React from 'react';
import ReactDOM from 'react-dom/client';
import './global.css';
import './App.css';
import App from './App';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

/src\components\Auth\Login.js:
--------------------------------------------------------------------------------
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import './Login.css';

const Login = () => {
  const [credentials, setCredentials] = useState({
    email: '',
    password: ''
  });
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const { login } = useAuth();
  const navigate = useNavigate();

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setError('');

    if (!credentials.email || !credentials.password) {
      setError('Por favor ingrese email y contrase√±a');
      setLoading(false);
      return;
    }

    const result = await login(credentials.email, credentials.password);
    
    console.log('Resultado del login:', result);

    if (result.success) {
      navigate('/dashboard');
    } else {
      setError(result.message);
    }
    
    setLoading(false);
  };

  const handleKeyDown = (e) => {
    if (e.key === 'Enter') {
      handleSubmit(e);
    }
  };

  return (
    <div className="login-container">
      <div className="login-card">
        <div className="login-header">
          <h1 className="login-title">PsicoGesti√≥n</h1>
          <p className="login-subtitle">Consultorio Psicol√≥gico</p>
        </div>

        <form onSubmit={handleSubmit}>
          <div className="form-group">
            <input
              type="email"
              className="input-field"
              placeholder="Correo electr√≥nico"
              value={credentials.email}
              onChange={(e) => setCredentials({...credentials, email: e.target.value})}
              onKeyDown={handleKeyDown}
              autoFocus
            />
          </div>

          <div className="form-group">
            <input
              type="password"
              className="input-field"
              placeholder="Contrase√±a"
              value={credentials.password}
              onChange={(e) => setCredentials({...credentials, password: e.target.value})}
              onKeyDown={handleKeyDown}
            />
          </div>

          {error && (
            <div className="error-message">
              {error}
            </div>
          )}

          <button
            type="submit"
            className="btn-primary w-100"
            disabled={loading}
          >
            {loading ? 'Iniciando sesi√≥n...' : 'Iniciar Sesi√≥n'}
          </button>

          <div className="login-footer">
            <p className="instructions">
              <span>Enter: Acceder</span>
              <span>ESC: Salir</span>
            </p>
          </div>
        </form>

        <div className="app-info">
          <p>Versi√≥n 1.0.0</p>
          <p>Sistema de Gesti√≥n de Consultorio Psicol√≥gico</p>
        </div>
      </div>
    </div>
  );
};

export default Login;

/src\components\Auth\PrivateRoute.js:
--------------------------------------------------------------------------------
import React from 'react';
import { Navigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';

const PrivateRoute = ({ children }) => {
  const { user, loading } = useAuth();

  if (loading) {
    return (
      <div className="global-loader">
        <div className="global-loader-content">
          <div className="global-loader-spinner"></div>
          <div className="global-loader-text">Cargando...</div>
        </div>
      </div>
    );
  }

  if (!user) {
    return <Navigate to="/login" />;
  }

  return children;
};

export default PrivateRoute;

/src\components\Auth\RoleRouter.js:
--------------------------------------------------------------------------------
import React from 'react';
import { Navigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import BecarioLayout from '../Layout/BecarioLayout';
import PsicologoLayout from '../Layout/PsicologoLayout';
import CoordinadorLayout from '../Layout/CoordinadorLayout';

const RoleRouter = ({ children }) => {
  const { user, loading } = useAuth();

  if (loading) {
    return (
      <div className="global-loader">
        <div className="global-loader-content">
          <div className="global-loader-spinner"></div>
          <div className="global-loader-text">Verificando rol...</div>
        </div>
      </div>
    );
  }

  if (!user) {
    return <Navigate to="/login" />;
  }

  // Determinar layout basado en el rol del usuario
  switch (user.rol) {
    case 'becario':
      return <BecarioLayout>{children}</BecarioLayout>;
    case 'psicologo':
      return <PsicologoLayout>{children}</PsicologoLayout>;
    case 'coordinador':
      return <CoordinadorLayout>{children}</CoordinadorLayout>;
    default:
      // Si el rol no est√° definido, redirigir a login
      return <Navigate to="/login" />;
  }
};

export default RoleRouter;

/src\components\Layout\BecarioLayout.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { Outlet, NavLink, useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { 
  FiMenu, FiX, FiHome, FiUsers, FiCalendar, FiBell, 
  FiFileText, FiLogOut, FiClock
} from 'react-icons/fi';

const BecarioLayout = () => {
  const [sidebarOpen, setSidebarOpen] = useState(true);
  const { user, logout } = useAuth();
  const navigate = useNavigate();
  const [notificaciones, setNotificaciones] = useState([]);

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  const fetchNotificaciones = async () => {
    try {
      const token = localStorage.getItem('token');
      const response = await fetch('http://localhost:3000/api/notificaciones/mis-notificaciones', {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      
      if (response.ok) {
        const data = await response.json();
        setNotificaciones(data.data || []);
      }
    } catch (error) {
      console.error('Error al obtener notificaciones:', error);
    }
  };

  useEffect(() => {
    fetchNotificaciones();
    // Actualizar cada 30 segundos
    const interval = setInterval(fetchNotificaciones, 30000);
    return () => clearInterval(interval);
  }, []);

  const navItems = [
    { path: '/becario/dashboard', icon: <FiHome />, label: 'Inicio', permiso: 'ver_panel_becario' },
    { path: '/becario/citas', icon: <FiCalendar />, label: 'Mis Citas', permiso: 'gestionar_citas_asignadas' },
    { path: '/becario/pacientes', icon: <FiUsers />, label: 'Mis Pacientes', permiso: 'ver_pacientes_asignados' },
    { path: '/becario/notificaciones', icon: <FiBell />, label: 'Notificaciones', permiso: 'ver_notificaciones' },
    { path: '/becario/observaciones', icon: <FiFileText />, label: 'Observaciones', permiso: 'registrar_observaciones' },
  ];

  return (
    <div className="main-container">
      {/* Top Header */}
      <header className="top-header">
        <div className="flex-row align-center">
          <button 
            className="control-btn"
            onClick={() => setSidebarOpen(!sidebarOpen)}
          >
            {sidebarOpen ? <FiX size={24} /> : <FiMenu size={24} />}
          </button>
          <h2 className="app-name">PsicoGesti√≥n - Becario</h2>
        </div>
        
        <div className="flex-row align-center gap-20">
          <div className="notificaciones-dropdown">
            <button className="btn-header">
              <FiBell />
              {notificaciones.filter(n => !n.leida).length > 0 && (
                <span className="badge-notificacion">
                  {notificaciones.filter(n => !n.leida).length}
                </span>
              )}
            </button>
          </div>
          
          <div className="user-info">
            <span className="user-email">{user?.email}</span>
            <span className="user-rol">Becario</span>
          </div>
          
          <button 
            className="btn-header"
            onClick={handleLogout}
            title="Cerrar sesi√≥n"
          >
            <FiLogOut />
            <span>Salir</span>
          </button>
        </div>
      </header>

      <div className="content-wrapper">
        {/* Sidebar */}
        <aside className={`sidebar ${sidebarOpen ? 'open' : 'closed'}`}>
          <nav className="sidebar-nav">
            {navItems.map((item) => (
              <NavLink
                key={item.path}
                to={item.path}
                className={({ isActive }) => 
                  `sidebar-nav-item ${isActive ? 'active' : ''}`
                }
              >
                {item.icon}
                {sidebarOpen && <span>{item.label}</span>}
              </NavLink>
            ))}
          </nav>
          
          {/* Info del d√≠a */}
          {sidebarOpen && (
            <div className="sidebar-info">
              <div className="sidebar-info-item">
                <FiClock />
                <span>{new Date().toLocaleDateString('es-ES', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</span>
              </div>
              <div className="sidebar-info-item">
                <FiUsers />
                <span>Pacientes asignados: Cargando...</span>
              </div>
            </div>
          )}
        </aside>

        {/* Main Content */}
        <main className="main-content">
          <div className="content-area">
            <Outlet />
          </div>
        </main>
      </div>

      {/* Bottom Status Bar */}
      <footer className="status-bar">
        <div className="status-info">
          <span>Sesi√≥n: {user?.email}</span>
          <span>Rol: Becario</span>
          <span>√öltima conexi√≥n: {new Date().toLocaleTimeString()}</span>
        </div>
      </footer>
    </div>
  );
};

export default BecarioLayout;

/src\components\Layout\CoordinadorLayout.js:
--------------------------------------------------------------------------------
import React, { useState } from 'react';
import { Outlet, NavLink, useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { 
  FiMenu, FiX, FiHome, FiUsers, FiCalendar, FiBarChart2,
  FiUserPlus, FiFileText, FiSettings, FiLogOut, FiClock,
  FiTrendingUp, FiUserCheck
} from 'react-icons/fi';

const CoordinadorLayout = () => {
  const [sidebarOpen, setSidebarOpen] = useState(true);
  const { user, logout } = useAuth();
  const navigate = useNavigate();

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  const navItems = [
    { path: '/coordinador/dashboard', icon: <FiHome />, label: 'Panel Coordinaci√≥n', permiso: 'ver_panel_coordinacion' },
    { path: '/coordinador/usuarios', icon: <FiUserPlus />, label: 'Gesti√≥n Usuarios', permiso: 'gestionar_usuarios' },
    { path: '/coordinador/pacientes', icon: <FiUsers />, label: 'Gesti√≥n Pacientes', permiso: 'gestionar_pacientes' },
    { path: '/coordinador/asignaciones', icon: <FiUserCheck />, label: 'Asignaciones', permiso: 'gestionar_asignaciones' },
    { path: '/coordinador/agenda', icon: <FiCalendar />, label: 'Agenda Global', permiso: 'ver_agenda_global' },
    { path: '/coordinador/reportes', icon: <FiBarChart2 />, label: 'Reportes', permiso: 'generar_reportes' },
    { path: '/coordinador/altas', icon: <FiTrendingUp />, label: 'Seguimiento Altas', permiso: 'gestionar_altas' },
    { path: '/coordinador/configuracion', icon: <FiSettings />, label: 'Configuraci√≥n', permiso: 'ver_panel_coordinacion' },
  ];

  return (
    <div className="main-container">
      <header className="top-header">
        <div className="flex-row align-center">
          <button 
            className="control-btn"
            onClick={() => setSidebarOpen(!sidebarOpen)}
          >
            {sidebarOpen ? <FiX size={24} /> : <FiMenu size={24} />}
          </button>
          <h2 className="app-name">PsicoGesti√≥n - Coordinaci√≥n</h2>
        </div>
        
        <div className="flex-row align-center gap-20">
          <div className="user-info">
            <span className="user-email">{user?.email}</span>
            <span className="user-rol">Coordinador</span>
            {user?.especialidad && (
              <span className="user-especialidad">‚Ä¢ {user.especialidad}</span>
            )}
          </div>
          
          <button 
            className="btn-header"
            onClick={handleLogout}
            title="Cerrar sesi√≥n"
          >
            <FiLogOut />
            <span>Salir</span>
          </button>
        </div>
      </header>

      <div className="content-wrapper">
        <aside className={`sidebar ${sidebarOpen ? 'open' : 'closed'}`}>
          <nav className="sidebar-nav">
            {navItems.map((item) => (
              <NavLink
                key={item.path}
                to={item.path}
                className={({ isActive }) => 
                  `sidebar-nav-item ${isActive ? 'active' : ''}`
                }
              >
                {item.icon}
                {sidebarOpen && <span>{item.label}</span>}
              </NavLink>
            ))}
          </nav>
          
          {sidebarOpen && (
            <div className="sidebar-info">
              <div className="sidebar-info-item">
                <FiClock />
                <span>Citas hoy: Cargando...</span>
              </div>
              <div className="sidebar-info-item">
                <FiUsers />
                <span>Becarios activos: Cargando...</span>
              </div>
              <div className="sidebar-info-item">
                <FiBarChart2 />
                <span>Altas este mes: Cargando...</span>
              </div>
            </div>
          )}
        </aside>

        <main className="main-content">
          <div className="content-area">
            <Outlet />
          </div>
        </main>
      </div>

      <footer className="status-bar">
        <div className="status-info">
          <span>Sesi√≥n: {user?.email}</span>
          <span>Rol: Coordinador ‚Ä¢ Sistema completo</span>
          <span>√öltima actualizaci√≥n: {new Date().toLocaleTimeString()}</span>
        </div>
      </footer>
    </div>
  );
};

export default CoordinadorLayout;

/src\components\Layout\MainLayout.js:
--------------------------------------------------------------------------------
import React, { useState } from 'react';
import { Outlet, NavLink, useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { FiMenu, FiX, FiHome, FiUsers, FiCalendar, FiSettings, FiLogOut } from 'react-icons/fi';

const MainLayout = () => {
  const [sidebarOpen, setSidebarOpen] = useState(true);
  const { user, logout } = useAuth();
  const navigate = useNavigate();

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  const navItems = [
    { path: '/dashboard', icon: <FiHome />, label: 'Dashboard' },
    { path: '/pacientes', icon: <FiUsers />, label: 'Pacientes' },
    { path: '/citas', icon: <FiCalendar />, label: 'Citas' },
    { path: '/configuracion', icon: <FiSettings />, label: 'Configuraci√≥n' },
  ];

  return (
    <div className="main-container">
      {/* Top Header */}
      <header className="top-header">
        <div className="flex-row align-center">
          <button 
            className="control-btn"
            onClick={() => setSidebarOpen(!sidebarOpen)}
          >
            {sidebarOpen ? <FiX size={24} /> : <FiMenu size={24} />}
          </button>
          <h2 className="app-name">PsicoGesti√≥n</h2>
        </div>
        
        <div className="flex-row align-center gap-20">
          <div className="user-info">
            <span className="user-email">{user?.email}</span>
          </div>
          <button 
            className="btn-header"
            onClick={handleLogout}
            title="Cerrar sesi√≥n"
          >
            <FiLogOut />
            <span>Salir</span>
          </button>
        </div>
      </header>

      <div className="content-wrapper">
        {/* Sidebar */}
        <aside className={`sidebar ${sidebarOpen ? 'open' : 'closed'}`}>
          <nav className="sidebar-nav">
            {navItems.map((item) => (
              <NavLink
                key={item.path}
                to={item.path}
                className={({ isActive }) => 
                  `sidebar-nav-item ${isActive ? 'active' : ''}`
                }
              >
                {item.icon}
                {sidebarOpen && <span>{item.label}</span>}
              </NavLink>
            ))}
          </nav>
        </aside>

        {/* Main Content */}
        <main className="main-content">
          <div className="content-area">
            <Outlet />
          </div>
        </main>
      </div>

      {/* Bottom Status Bar */}
      <footer className="status-bar">
        <div className="status-info">
          <span>Sesi√≥n activa: {user?.email}</span>
          <span>√öltima conexi√≥n: {new Date().toLocaleTimeString()}</span>
        </div>
      </footer>
    </div>
  );
};

export default MainLayout;

/src\components\Layout\PsicologoLayout.js:
--------------------------------------------------------------------------------
import React, { useState } from 'react';
import { Outlet, NavLink, useNavigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { 
  FiMenu, FiX, FiHome, FiUsers, FiCalendar, FiFileText,
  FiBarChart2, FiUserCheck, FiLogOut, FiClock
} from 'react-icons/fi';

const PsicologoLayout = () => {
  const [sidebarOpen, setSidebarOpen] = useState(true);
  const { user, logout } = useAuth();
  const navigate = useNavigate();

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  const navItems = [
    { path: '/psicologo/dashboard', icon: <FiHome />, label: 'Panel Principal', permiso: 'ver_panel_psicologo' },
    { path: '/psicologo/pacientes', icon: <FiUsers />, label: 'Mis Pacientes', permiso: 'ver_mis_pacientes' },
    { path: '/psicologo/citas', icon: <FiCalendar />, label: 'Mis Citas', permiso: 'gestionar_mis_citas' },
    { path: '/psicologo/expedientes', icon: <FiFileText />, label: 'Expedientes', permiso: 'ver_expedientes' },
    { path: '/psicologo/sesiones', icon: <FiBarChart2 />, label: 'Registro Sesiones', permiso: 'registrar_sesiones' },
    { path: '/psicologo/supervision', icon: <FiUserCheck />, label: 'Supervisi√≥n', permiso: 'supervisar_becarios' },
  ];

  return (
    <div className="main-container">
      <header className="top-header">
        <div className="flex-row align-center">
          <button 
            className="control-btn"
            onClick={() => setSidebarOpen(!sidebarOpen)}
          >
            {sidebarOpen ? <FiX size={24} /> : <FiMenu size={24} />}
          </button>
          <h2 className="app-name">PsicoGesti√≥n - Psic√≥logo</h2>
        </div>
        
        <div className="flex-row align-center gap-20">
          <div className="user-info">
            <span className="user-email">{user?.email}</span>
            <span className="user-rol">Psic√≥logo</span>
            {user?.especialidad && (
              <span className="user-especialidad">‚Ä¢ {user.especialidad}</span>
            )}
          </div>
          
          <button 
            className="btn-header"
            onClick={handleLogout}
            title="Cerrar sesi√≥n"
          >
            <FiLogOut />
            <span>Salir</span>
          </button>
        </div>
      </header>

      <div className="content-wrapper">
        <aside className={`sidebar ${sidebarOpen ? 'open' : 'closed'}`}>
          <nav className="sidebar-nav">
            {navItems.map((item) => (
              <NavLink
                key={item.path}
                to={item.path}
                className={({ isActive }) => 
                  `sidebar-nav-item ${isActive ? 'active' : ''}`
                }
              >
                {item.icon}
                {sidebarOpen && <span>{item.label}</span>}
              </NavLink>
            ))}
          </nav>
          
          {sidebarOpen && (
            <div className="sidebar-info">
              <div className="sidebar-info-item">
                <FiClock />
                <span>Citas hoy: Cargando...</span>
              </div>
              <div className="sidebar-info-item">
                <FiUsers />
                <span>Pacientes activos: Cargando...</span>
              </div>
            </div>
          )}
        </aside>

        <main className="main-content">
          <div className="content-area">
            <Outlet />
          </div>
        </main>
      </div>

      <footer className="status-bar">
        <div className="status-info">
          <span>Sesi√≥n: {user?.email}</span>
          <span>Rol: Psic√≥logo ‚Ä¢ Especialidad: {user?.especialidad || 'No especificada'}</span>
          <span>√öltima actualizaci√≥n: {new Date().toLocaleTimeString()}</span>
        </div>
      </footer>
    </div>
  );
};

export default PsicologoLayout;

/src\context\AuthContext.js:
--------------------------------------------------------------------------------
import React, { createContext, useState, useContext, useEffect } from 'react';
import axios from 'axios';

const AuthContext = createContext({});

export const useAuth = () => useContext(AuthContext);

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [token, setToken] = useState(localStorage.getItem('token'));

  useEffect(() => {
    if (token) {
      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;
      fetchUserData();
    } else {
      setLoading(false);
    }
  }, [token]);

  const fetchUserData = async () => {
    try {
      const response = await axios.get('http://localhost:3000/api/auth/me');
      setUser(response.data.user);
    } catch (error) {
      console.error('Error fetching user data:', error);
      // Si el error es 401 (token inv√°lido/vencido), hacer logout
      if (error.response?.status === 401) {
        logout();
      }
    } finally {
      setLoading(false);
    }
  };

  const login = async (email, password) => {
    try {
      const response = await axios.post('http://localhost:3000/api/auth/login', {
        email,
        password
      });
      
      const { token, user } = response.data;
      
      localStorage.setItem('token', token);
      localStorage.setItem('psico_user', JSON.stringify(user));
      
      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;
      setToken(token);
      setUser(user);
      
      // Redirigir seg√∫n el rol despu√©s del login exitoso
      setTimeout(() => {
        switch (user.rol) {
          case 'becario':
            window.location.href = '/becario/dashboard';
            break;
          case 'psicologo':
            window.location.href = '/psicologo/dashboard';
            break;
          case 'coordinador':
            window.location.href = '/coordinador/dashboard';
            break;
          default:
            window.location.href = '/dashboard';
        }
      }, 100);
      
      return { success: true };
    } catch (error) {
      console.error('Login error:', error);
      return { 
        success: false, 
        message: error.response?.data?.message || 'Error en el inicio de sesi√≥n' 
      };
    }
  };

  const logout = () => {
    localStorage.removeItem('token');
    localStorage.removeItem('psico_user');
    delete axios.defaults.headers.common['Authorization'];
    setToken(null);
    setUser(null);
    window.location.href = '/login';
  };

  const updateUser = (updatedUser) => {
    setUser(updatedUser);
    localStorage.setItem('psico_user', JSON.stringify(updatedUser));
  };

  const value = {
    user,
    token,
    login,
    logout,
    updateUser,
    loading
  };

  return (
    <AuthContext.Provider value={value}>
      {children}
    </AuthContext.Provider>
  );
};

/src\pages\CitasPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { 
  FiCalendar, 
  FiClock, 
  FiUser, 
  FiPlus, 
  FiEdit2, 
  FiChevronLeft, 
  FiChevronRight,
  FiPhone,
  FiMail,
  FiRefreshCw,
  FiX
} from 'react-icons/fi';
import { format, addDays, subDays, startOfWeek, endOfWeek, eachDayOfInterval, isToday } from 'date-fns';
import { es } from 'date-fns/locale';

const CitasPage = () => {
  const [citas, setCitas] = useState([]);
  const [selectedDate, setSelectedDate] = useState(new Date());
  const [view, setView] = useState('day');
  const [loading, setLoading] = useState(true);
  const [filterBecario, setFilterBecario] = useState('');
  const [becarios, setBecarios] = useState([]);
  const [selectedCita, setSelectedCita] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [showNuevaCitaModal, setShowNuevaCitaModal] = useState(false);
  const [nuevaCitaData, setNuevaCitaData] = useState({
    paciente_nombre: '',
    paciente_apellido: '',
    paciente_telefono: '',
    paciente_email: '',
    fecha: '',
    hora: '',
    tipo_consulta: 'presencial',
    duracion: 50,
    notas: '',
    psicologo_id: '',
    becario_id: ''
  });
  const [error, setError] = useState('');

  const getToken = () => {
    return localStorage.getItem('token');
  };

  const formatDateForAPI = (date) => {
    return format(date, 'yyyy-MM-dd');
  };

  const fetchBecarios = async () => {
    try {
      const token = getToken();
      const response = await fetch('http://localhost:3000/api/users/becarios', {
        headers: {
          'Authorization': `Bearer ${token}`
        }
      });
      
      if (response.ok) {
        const data = await response.json();
        setBecarios(data);
      }
    } catch (error) {
      console.error('Error al obtener becarios:', error);
    }
  };

  const fetchCitas = async () => {
    try {
      setLoading(true);
      const token = getToken();
      const fecha = formatDateForAPI(selectedDate);
      
      let url = `http://localhost:3000/api/citas/citas-por-fecha?fecha=${fecha}`;
      
      if (filterBecario) {
        url += `&becario_id=${filterBecario}`;
      }
      
      console.log('üîç Fetching citas from:', url);
      
      const response = await fetch(url, {
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        }
      });
      
      if (response.ok) {
        const data = await response.json();
        
        // NORMALIZA LOS DATOS
        const citasNormalizadas = (data.data || []).map(cita => {
          return {
            ...cita,
            // Formatea la hora para quitar los segundos
            hora: cita.hora ? cita.hora.substring(0, 5) : '',
            // Usa duracion_minutos como duracion
            duracion: cita.duracion_minutos || cita.duracion || 50,
            // Usa motivo como notas
            notas: cita.motivo || cita.notas || '',
            // Asegura que paciente_nombre exista
            paciente_nombre: cita.paciente_nombre || `Paciente ${cita.id}`
          };
        });
        
        setCitas(citasNormalizadas);
      } else {
        console.error('Error al obtener citas');
      }
    } catch (error) {
      console.error('Error:', error);
    } finally {
      setLoading(false);
    }
  };

  const fetchCitasSemana = async () => {
    try {
      setLoading(true);
      const token = getToken();
      
      const startDate = startOfWeek(selectedDate, { weekStartsOn: 1 });
      const endDate = endOfWeek(selectedDate, { weekStartsOn: 1 });
      
      const promises = eachDayOfInterval({ start: startDate, end: endDate }).map(async (date) => {
        const fecha = formatDateForAPI(date);
        const response = await fetch(`http://localhost:3000/api/citas/citas-por-fecha?fecha=${fecha}${filterBecario ? `&becario_id=${filterBecario}` : ''}`, {
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });
        
        if (response.ok) {
          const data = await response.json();
          return { fecha, citas: data.data || [] };
        }
        return { fecha, citas: [] };
      });
      
      const results = await Promise.all(promises);
      setCitas(results.flatMap(r => r.citas));
      
    } catch (error) {
      console.error('Error:', error);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchBecarios();
    if (view === 'day') {
      fetchCitas();
    } else if (view === 'week') {
      fetchCitasSemana();
    }
  }, [selectedDate, view, filterBecario]);

  const goToPreviousDay = () => {
    setSelectedDate(prev => subDays(prev, 1));
  };

  const goToNextDay = () => {
    setSelectedDate(prev => addDays(prev, 1));
  };

  const goToToday = () => {
    setSelectedDate(new Date());
  };

  const goToPreviousWeek = () => {
    setSelectedDate(prev => subDays(prev, 7));
  };

  const goToNextWeek = () => {
    setSelectedDate(prev => addDays(prev, 7));
  };

  const formatDateSpanish = (date) => {
    return format(date, "EEEE d 'de' MMMM, yyyy", { locale: es });
  };

  const generateHours = () => {
    const hours = [];
    for (let i = 9; i <= 20; i++) {
      hours.push(`${i}:00`);
      if (i !== 20) {
        hours.push(`${i}:30`);
      }
    }
    return hours;
  };


  const citasDelDia = citas.filter(cita => {
    console.log('üîç Cita individual:', {
      id: cita.id,
      cita_fecha: cita.fecha,
      cita_fecha_raw: cita.fecha,
      selected_date_formatted: formatDateForAPI(selectedDate),
      cita_date_object: new Date(cita.fecha),
      cita_date_formatted: formatDateForAPI(new Date(cita.fecha))
    });
    
    const isSameDay1 = cita.fecha === formatDateForAPI(selectedDate);
    
    const citaDate = new Date(cita.fecha);
    const selectedDateObj = new Date(selectedDate);
    const isSameDay2 = formatDateForAPI(citaDate) === formatDateForAPI(selectedDateObj);
    
    // M√©todo 3: Comparar a√±o, mes y d√≠a
    const isSameDay3 = 
      citaDate.getFullYear() === selectedDateObj.getFullYear() &&
      citaDate.getMonth() === selectedDateObj.getMonth() &&
      citaDate.getDate() === selectedDateObj.getDate();
    
    
    return isSameDay1 || isSameDay2 || isSameDay3;
  });

  const handleConfirmCita = async (citaId) => {
    try {
      const token = getToken();
      const response = await fetch(`http://localhost:3000/api/citas/cita/${citaId}`, {
        method: 'PUT',
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ estado: 'confirmada' })
      });
      
      if (response.ok) {
        fetchCitas();
      }
    } catch (error) {
      console.error('Error al confirmar cita:', error);
    }
  };

  const handleCancelCita = async (citaId) => {
    try {
      const token = getToken();
      const response = await fetch(`http://localhost:3000/api/citas/cita/${citaId}`, {
        method: 'PUT',
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ 
          estado: 'cancelada',
          motivo_cancelacion: 'Cancelada por usuario' 
        })
      });
      
      if (response.ok) {
        fetchCitas();
      }
    } catch (error) {
      console.error('Error al cancelar cita:', error);
    }
  };

  const showCitaDetails = (cita) => {
    setSelectedCita(cita);
    setShowModal(true);
  };

  const handleNuevaCitaChange = (e) => {
    const { name, value } = e.target;
    setNuevaCitaData({
      ...nuevaCitaData,
      [name]: value
    });
  };

  const handleNuevaCitaSubmit = async (e) => {
    e.preventDefault();
    setError('');

    if (!nuevaCitaData.paciente_nombre || !nuevaCitaData.paciente_apellido || !nuevaCitaData.fecha || !nuevaCitaData.hora) {
      setError('Por favor complete los campos requeridos: Nombre, Apellido, Fecha y Hora');
      return;
    }

    try {
      const token = getToken();
      
      const citaData = {
        paciente: {
          nombre: nuevaCitaData.paciente_nombre.trim(),
          apellido: nuevaCitaData.paciente_apellido.trim(),
          telefono: nuevaCitaData.paciente_telefono || '',
          email: nuevaCitaData.paciente_email || ''
        },
        fecha: nuevaCitaData.fecha,
        hora: nuevaCitaData.hora,
        tipo_consulta: nuevaCitaData.tipo_consulta,
        duracion: parseInt(nuevaCitaData.duracion),
        notas: nuevaCitaData.notas || '',
        becario_id: nuevaCitaData.becario_id || null
      };

      console.log('üì§ Enviando datos de cita:', citaData);

      const response = await fetch('http://localhost:3000/api/citas/nueva', {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(citaData)
      });

      const responseText = await response.text();
      console.log('üì• Respuesta del servidor:', responseText);

      if (!response.ok) {
        try {
          const errorData = JSON.parse(responseText);
          throw new Error(errorData.message || 'Error al crear la cita');
        } catch (parseError) {
          throw new Error(responseText || 'Error al crear la cita');
        }
      }

      const data = JSON.parse(responseText);
      
      if (data.success) {
        setShowNuevaCitaModal(false);
        setNuevaCitaData({
          paciente_nombre: '',
          paciente_apellido: '',
          paciente_telefono: '',
          paciente_email: '',
          fecha: formatDateForAPI(selectedDate),
          hora: '',
          tipo_consulta: 'presencial',
          duracion: 50,
          notas: '',
          becario_id: ''
        });
        
        // Mostrar mensaje de √©xito
        alert('‚úÖ Cita creada exitosamente');
        
        // Recargar las citas
        if (view === 'day') {
          fetchCitas();
        } else {
          fetchCitasSemana();
        }
      } else {
        setError(data.message || 'Error al crear la cita');
      }
      
    } catch (error) {
      console.error('Error al crear cita:', error);
      setError(error.message || 'Error al crear la cita');
    }
  };

  const weekDays = view === 'week' ? 
    eachDayOfInterval({ 
      start: startOfWeek(selectedDate, { weekStartsOn: 1 }), 
      end: endOfWeek(selectedDate, { weekStartsOn: 1 }) 
    }) : [];

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando citas...</div>
      </div>
    );
  }

  return (
    <div className="citas-page">
      <div className="page-header">
        <div>
          <h1>Calendario de Citas</h1>
          <p>Gesti√≥n de agenda del consultorio</p>
        </div>
        <div className="flex-row gap-10">
          <div className="filter-select">
            <select 
              value={filterBecario} 
              onChange={(e) => setFilterBecario(e.target.value)}
              className="form-select"
            >
              <option value="">Todos los becarios</option>
              {becarios.map(becario => (
                <option key={becario.id} value={becario.id}>
                  {becario.nombre} {becario.apellido}
                </option>
              ))}
            </select>
          </div>
          <button className="btn-secondary" onClick={fetchCitas}>
            <FiRefreshCw /> Actualizar
          </button>
          <button className="btn-primary" onClick={() => setShowNuevaCitaModal(true)}>
            <FiPlus /> Nueva Cita
          </button>
        </div>
      </div>

      <div className="calendar-controls">
        <div className="view-selector">
          <button 
            className={`btn-text ${view === 'day' ? 'active' : ''}`}
            onClick={() => setView('day')}
          >
            D√≠a
          </button>
          <button 
            className={`btn-text ${view === 'week' ? 'active' : ''}`}
            onClick={() => setView('week')}
          >
            Semana
          </button>
        </div>

        <div className="date-navigation">
          <button 
            className="btn-text"
            onClick={view === 'day' ? goToPreviousDay : goToPreviousWeek}
          >
            <FiChevronLeft /> {view === 'day' ? 'Ayer' : 'Sem. anterior'}
          </button>
          
          <div className="current-date">
            <h3>
              {view === 'day' 
                ? formatDateSpanish(selectedDate)
                : `Semana del ${format(startOfWeek(selectedDate, { weekStartsOn: 1 }), 'd MMM')} al ${format(endOfWeek(selectedDate, { weekStartsOn: 1 }), 'd MMM, yyyy')}`
              }
            </h3>
          </div>
          
          <button 
            className="btn-text"
            onClick={view === 'day' ? goToNextDay : goToNextWeek}
          >
            {view === 'day' ? 'Ma√±ana' : 'Pr√≥x. semana'} <FiChevronRight />
          </button>
        </div>

        <div className="quick-actions">
          <button className="btn-secondary" onClick={goToToday}>
            Hoy
          </button>
        </div>
      </div>

      {view === 'day' ? (
        <div className="calendar-day-view">
          <div className="time-column">
            {generateHours().map((hour) => (
              <div key={hour} className="time-slot">
                <span className="time-label">{hour}</span>
              </div>
            ))}
          </div>

          <div className="events-column">
            {generateHours().map((hour) => {
              const hourCitas = citasDelDia.filter(cita => 
                cita.hora.startsWith(hour.split(':')[0])
              );

              return (
                <div key={hour} className="hour-slot">
                  {hourCitas.map((cita) => (
                    <div 
                      key={cita.id}
                      className={`event-item ${
                        cita.estado === 'confirmada' ? 'event-confirmed' :
                        cita.estado === 'completada' ? 'event-completed' :
                        cita.estado === 'programada' ? 'event-pending' :
                        'event-cancelled'
                      }`}
                      style={{ height: `${(cita.duracion / 30) * 50}px` }}
                      onClick={() => showCitaDetails(cita)}
                    >
                      <div className="event-header">
                        <div className="event-time">
                          <FiClock /> {cita.hora}
                        </div>
                        <div className="event-actions">
                          <button className="btn-text" onClick={(e) => {
                            e.stopPropagation();
                            showCitaDetails(cita);
                          }}>
                            <FiEdit2 />
                          </button>
                        </div>
                      </div>
                      <div className="event-content">
                        <div className="event-patient">
                          <FiUser /> {cita.paciente_nombre || 'Sin nombre'}
                        </div>
                        <div className="event-type">{cita.tipo_consulta}</div>
                        {cita.notas && (
                          <div className="event-notes">{cita.notas}</div>
                        )}
                      </div>
                      <div className="event-footer">
                        <span className={`badge ${
                          cita.estado === 'confirmada' ? 'badge-success' :
                          cita.estado === 'completada' ? 'badge-primary' :
                          cita.estado === 'programada' ? 'badge-warning' :
                          'badge-danger'
                        }`}>
                          {cita.estado}
                        </span>
                      </div>
                    </div>
                  ))}
                </div>
              );
            })}
          </div>
        </div>
      ) : (
        <div className="calendar-week-view">
          <div className="week-header">
            <div className="time-header"></div>
            {weekDays.map((day) => (
              <div key={day.toISOString()} className="day-header">
                <div className={`day-name ${isToday(day) ? 'today' : ''}`}>
                  {format(day, 'EEE', { locale: es })}
                </div>
                <div className="day-number">
                  {format(day, 'd')}
                </div>
              </div>
            ))}
          </div>
          
          <div className="week-body">
            <div className="time-column">
              {generateHours().map(hour => (
                <div key={hour} className="time-slot">{hour}</div>
              ))}
            </div>
            
            {weekDays.map((day) => (
              <div key={day.toISOString()} className="day-column">
                {generateHours().map(hour => {
                  const dayCitas = citas.filter(cita => {
                    const citaDate = new Date(cita.fecha);
                    return citaDate.toDateString() === day.toDateString() &&
                           cita.hora.startsWith(hour.split(':')[0]);
                  });
                  
                  return (
                    <div key={hour} className="hour-cell">
                      {dayCitas.map(cita => (
                        <div 
                          key={cita.id}
                          className={`week-event ${
                            cita.estado === 'confirmada' ? 'event-confirmed' :
                            'event-pending'
                          }`}
                          onClick={() => showCitaDetails(cita)}
                          title={`${cita.hora} - ${cita.paciente_nombre}`}
                        >
                          <div className="week-event-time">{cita.hora}</div>
                          <div className="week-event-patient">{cita.paciente_nombre}</div>
                        </div>
                      ))}
                    </div>
                  );
                })}
              </div>
            ))}
          </div>
        </div>
      )}

      <div className="day-citas-list">
        <h3>
          Citas para {formatDateSpanish(selectedDate)} ({citasDelDia.length})
        </h3>
        
        {citasDelDia.length > 0 ? (
          <div className="citas-cards">
            {citasDelDia.map((cita) => (
              <div key={cita.id} className="cita-card">
                <div className="cita-card-header">
                  <div className="cita-time">
                    <FiClock /> {cita.hora} ({cita.duracion || 50} min)
                  </div>
                  <div className={`cita-status badge ${
                    cita.estado === 'confirmada' ? 'badge-success' :
                    cita.estado === 'completada' ? 'badge-primary' :
                    cita.estado === 'programada' ? 'badge-warning' :
                    'badge-danger'
                  }`}>
                    {cita.estado}
                  </div>
                </div>
                
                <div className="cita-card-body">
                  <div className="cita-paciente">
                    <FiUser /> {cita.paciente_nombre || 'Paciente'}
                  </div>
                  
                  <div className="cita-info">
                    <div className="cita-tipo">
                      {cita.tipo_consulta === 'presencial' ? 'üìã Presencial' : 'üíª Virtual'}
                    </div>
                    
                    {cita.paciente_telefono && (
                      <div className="cita-contacto">
                        <FiPhone /> {cita.paciente_telefono}
                      </div>
                    )}
                    
                    {cita.psicologo_nombre && (
                      <div className="cita-psicologo">
                        üë®‚Äç‚öïÔ∏è {cita.psicologo_nombre}
                      </div>
                    )}
                    
                    {cita.becario_nombre && (
                      <div className="cita-becario">
                        üë®‚Äçüéì {cita.becario_nombre}
                      </div>
                    )}
                  </div>
                  
                  {cita.notas && (
                    <div className="cita-notas">
                      <strong>Notas:</strong> {cita.notas}
                    </div>
                  )}
                </div>
                
                <div className="cita-card-footer">
                  <button 
                    className="btn-text"
                    onClick={() => showCitaDetails(cita)}
                  >
                    Detalles
                  </button>
                  
                  {cita.estado === 'programada' && (
                    <button 
                      className="btn-text text-success"
                      onClick={() => handleConfirmCita(cita.id)}
                    >
                      Confirmar
                    </button>
                  )}
                  
                  {(cita.estado === 'programada' || cita.estado === 'confirmada') && (
                    <button 
                      className="btn-text text-danger"
                      onClick={() => handleCancelCita(cita.id)}
                    >
                      Cancelar
                    </button>
                  )}
                </div>
              </div>
            ))}
          </div>
        ) : (
          <div className="no-citas">
            <div className="no-citas-icon">üìÖ</div>
            <div>No hay citas programadas para este d√≠a</div>
            <button className="btn-text" onClick={() => setShowNuevaCitaModal(true)}>Agendar nueva cita</button>
          </div>
        )}
      </div>

      {showModal && selectedCita && (
        <div className="modal-overlay">
          <div className="modal-content">
            <div className="modal-header">
              <h2>Detalles de la Cita</h2>
              <button className="btn-text" onClick={() => setShowModal(false)}>√ó</button>
            </div>
            
            <div className="modal-body">
              <div className="detail-row">
                <strong>Paciente:</strong>
                <span>{selectedCita.paciente_nombre}</span>
              </div>
              
              <div className="detail-row">
                <strong>Fecha y hora:</strong>
                <span>{selectedCita.fecha} {selectedCita.hora}</span>
              </div>
              
              <div className="detail-row">
                <strong>Duraci√≥n:</strong>
                <span>{selectedCita.duracion || 50} minutos</span>
              </div>
              
              <div className="detail-row">
                <strong>Tipo:</strong>
                <span>{selectedCita.tipo_consulta === 'presencial' ? 'Presencial' : 'Virtual'}</span>
              </div>
              
              <div className="detail-row">
                <strong>Estado:</strong>
                <span className={`badge ${
                  selectedCita.estado === 'confirmada' ? 'badge-success' :
                  selectedCita.estado === 'completada' ? 'badge-primary' :
                  selectedCita.estado === 'programada' ? 'badge-warning' :
                  'badge-danger'
                }`}>
                  {selectedCita.estado}
                </span>
              </div>
              
              {selectedCita.psicologo_nombre && (
                <div className="detail-row">
                  <strong>Psic√≥logo:</strong>
                  <span>{selectedCita.psicologo_nombre}</span>
                </div>
              )}
              
              {selectedCita.becario_nombre && (
                <div className="detail-row">
                  <strong>Becario:</strong>
                  <span>{selectedCita.becario_nombre}</span>
                </div>
              )}
              
              {selectedCita.paciente_telefono && (
                <div className="detail-row">
                  <strong>Tel√©fono:</strong>
                  <span>{selectedCita.paciente_telefono}</span>
                </div>
              )}
              
              {selectedCita.notas && (
                <div className="detail-row notes">
                  <strong>Notas:</strong>
                  <p>{selectedCita.notas}</p>
                </div>
              )}
            </div>
            
            <div className="modal-footer">
              <button className="btn-secondary" onClick={() => setShowModal(false)}>
                Cerrar
              </button>
              <button className="btn-primary">
                <FiEdit2 /> Editar Cita
              </button>
            </div>
          </div>
        </div>
      )}

      {showNuevaCitaModal && (
      <div className="modal-overlay">
        <div className="modal-container">
          <div className="modal-header">
            <h2 className="modal-title">Agendar Nueva Cita</h2>
            <button 
              className="modal-close"
              onClick={() => {
                setShowNuevaCitaModal(false);
                setError('');
              }}
            >
              √ó
            </button>
          </div>

          {error && (
            <div className="error-message">
              {error}
            </div>
          )}
          
          <form onSubmit={handleNuevaCitaSubmit}>
            <div className="form-grid">
              <div className="form-group">
                <input 
                  type="text" 
                  name="paciente_nombre" 
                  placeholder="Nombre del paciente"
                  value={nuevaCitaData.paciente_nombre}
                  onChange={handleNuevaCitaChange}
                  className="input-field"
                  required
                />
              </div>
              
              <div className="form-group">
                <input 
                  type="text" 
                  name="paciente_apellido" 
                  placeholder="Apellido del paciente"
                  value={nuevaCitaData.paciente_apellido}
                  onChange={handleNuevaCitaChange}
                  className="input-field"
                  required
                />
              </div>
              
              <div className="form-group">
                <input 
                  type="tel" 
                  name="paciente_telefono" 
                  placeholder="Tel√©fono"
                  value={nuevaCitaData.paciente_telefono}
                  onChange={handleNuevaCitaChange}
                  className="input-field"
                />
              </div>
              
              <div className="form-group">
                <input 
                  type="email" 
                  name="paciente_email" 
                  placeholder="Email"
                  value={nuevaCitaData.paciente_email}
                  onChange={handleNuevaCitaChange}
                  className="input-field"
                />
              </div>
              
              <div className="form-group">
                <input 
                  type="date" 
                  name="fecha" 
                  value={nuevaCitaData.fecha || formatDateForAPI(selectedDate)}
                  onChange={handleNuevaCitaChange}
                  className="input-field"
                  required
                />
              </div>
              
              <div className="form-group">
                <select
                  name="hora"
                  value={nuevaCitaData.hora}
                  onChange={handleNuevaCitaChange}
                  className="select-field"
                  required
                >
                  <option value="">Seleccione hora</option>
                  {generateHours().map(hour => (
                    <option key={hour} value={hour}>{hour}</option>
                  ))}
                </select>
              </div>
              
              <div className="form-group">
                <select
                  name="tipo_consulta"
                  value={nuevaCitaData.tipo_consulta}
                  onChange={handleNuevaCitaChange}
                  className="select-field"
                >
                  <option value="presencial">Presencial</option>
                  <option value="virtual">Virtual</option>
                </select>
              </div>
              
              <div className="form-group">
                <select
                  name="duracion"
                  value={nuevaCitaData.duracion}
                  onChange={handleNuevaCitaChange}
                  className="select-field"
                >
                  <option value="30">30 minutos</option>
                  <option value="50">50 minutos</option>
                  <option value="60">60 minutos</option>
                  <option value="90">90 minutos</option>
                </select>
              </div>
              
              <div className="form-group">
                <select
                  name="becario_id"
                  value={nuevaCitaData.becario_id}
                  onChange={handleNuevaCitaChange}
                  className="select-field"
                >
                  <option value="">Sin becario asignado</option>
                  {becarios.map(becario => (
                    <option key={becario.id} value={becario.id}>
                      {becario.nombre} {becario.apellido}
                    </option>
                  ))}
                </select>
              </div>
              
              <div className="form-group" style={{ gridColumn: 'span 2' }}>
                <textarea 
                  name="notas" 
                  placeholder="Notas adicionales"
                  value={nuevaCitaData.notas}
                  onChange={handleNuevaCitaChange}
                  className="textarea-field"
                  rows="3"
                />
              </div>
            </div>
            
            <div className="modal-footer">
              <button 
                type="submit"
                className="btn-primary"
              >
                <FiPlus /> Agendar Cita
              </button>
              <button 
                type="button"
                onClick={() => {
                  setShowNuevaCitaModal(false);
                  setError('');
                }}
                className="btn-danger"
              >
                Cancelar
              </button>
            </div>
          </form>
        </div>
      </div>
    )}
    </div>
  );
};

export default CitasPage;

/src\pages\ConfiguracionPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { useAuth } from '../context/AuthContext';
import { 
  FiUser, 
  FiLock, 
  FiBell, 
  FiCalendar, 
  FiSave,
  FiUpload,
  FiDownload
} from 'react-icons/fi';

const ConfiguracionPage = () => {
  const { user, updateUser } = useAuth();
  const [activeTab, setActiveTab] = useState('perfil');
  const [formData, setFormData] = useState({
    nombre: '',
    email: '',
    telefono: '',
    especialidad: '',
    horarioInicio: '09:00',
    horarioFin: '18:00',
    duracionCita: 45,
    notificacionesEmail: true,
    notificacionesSMS: false
  });
  const [passwordData, setPasswordData] = useState({
    currentPassword: '',
    newPassword: '',
    confirmPassword: ''
  });
  const [saving, setSaving] = useState(false);
  const [message, setMessage] = useState({ type: '', text: '' });

  useEffect(() => {
    if (user) {
      setFormData({
        nombre: user.nombre || '',
        email: user.email || '',
        telefono: user.telefono || '',
        especialidad: user.especialidad || 'Psicolog√≠a Cl√≠nica',
        horarioInicio: user.horarioInicio || '09:00',
        horarioFin: user.horarioFin || '18:00',
        duracionCita: user.duracionCita || 45,
        notificacionesEmail: user.notificacionesEmail || true,
        notificacionesSMS: user.notificacionesSMS || false
      });
    }
  }, [user]);

  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormData({
      ...formData,
      [name]: type === 'checkbox' ? checked : value
    });
  };

  const handlePasswordChange = (e) => {
    const { name, value } = e.target;
    setPasswordData({
      ...passwordData,
      [name]: value
    });
  };

  const handleSaveProfile = async (e) => {
    e.preventDefault();
    setSaving(true);
    
    try {
      // Simular guardado
      setTimeout(() => {
        updateUser(formData);
        setMessage({ type: 'success', text: 'Perfil actualizado correctamente' });
        setSaving(false);
        
        setTimeout(() => {
          setMessage({ type: '', text: '' });
        }, 3000);
      }, 1000);
    } catch (error) {
      setMessage({ type: 'error', text: 'Error al guardar los cambios' });
      setSaving(false);
    }
  };

  const handleChangePassword = async (e) => {
    e.preventDefault();
    
    if (passwordData.newPassword !== passwordData.confirmPassword) {
      setMessage({ type: 'error', text: 'Las contrase√±as no coinciden' });
      return;
    }
    
    if (passwordData.newPassword.length < 6) {
      setMessage({ type: 'error', text: 'La contrase√±a debe tener al menos 6 caracteres' });
      return;
    }
    
    setSaving(true);
    
    try {
      // Simular cambio de contrase√±a
      setTimeout(() => {
        setMessage({ type: 'success', text: 'Contrase√±a cambiada correctamente' });
        setPasswordData({
          currentPassword: '',
          newPassword: '',
          confirmPassword: ''
        });
        setSaving(false);
        
        setTimeout(() => {
          setMessage({ type: '', text: '' });
        }, 3000);
      }, 1000);
    } catch (error) {
      setMessage({ type: 'error', text: 'Error al cambiar la contrase√±a' });
      setSaving(false);
    }
  };

  const tabs = [
    { id: 'perfil', label: 'Perfil', icon: <FiUser /> },
    { id: 'seguridad', label: 'Seguridad', icon: <FiLock /> },
    { id: 'notificaciones', label: 'Notificaciones', icon: <FiBell /> },
    { id: 'horarios', label: 'Horarios', icon: <FiCalendar /> }
  ];

  return (
    <div className="configuracion-page">
      <div className="page-header">
        <h1>Configuraci√≥n</h1>
        <p>Configuraci√≥n del sistema y perfil de usuario</p>
      </div>

      {message.text && (
        <div className={`alert-message ${message.type}`}>
          {message.text}
        </div>
      )}

      <div className="configuracion-container">
        {/* Tabs */}
        <div className="config-tabs">
          {tabs.map((tab) => (
            <button
              key={tab.id}
              className={`config-tab ${activeTab === tab.id ? 'active' : ''}`}
              onClick={() => setActiveTab(tab.id)}
            >
              {tab.icon}
              <span>{tab.label}</span>
            </button>
          ))}
        </div>

        {/* Contenido de las tabs */}
        <div className="config-content">
          {/* Perfil */}
          {activeTab === 'perfil' && (
            <div className="tab-content">
              <h3>Informaci√≥n del Perfil</h3>
              <form onSubmit={handleSaveProfile}>
                <div className="form-grid">
                  <div className="form-group">
                    <label>Nombre completo</label>
                    <input
                      type="text"
                      name="nombre"
                      className="input-field"
                      value={formData.nombre}
                      onChange={handleInputChange}
                      placeholder="Tu nombre completo"
                    />
                  </div>
                  
                  <div className="form-group">
                    <label>Correo electr√≥nico</label>
                    <input
                      type="email"
                      name="email"
                      className="input-field"
                      value={formData.email}
                      onChange={handleInputChange}
                      placeholder="tu@email.com"
                    />
                  </div>
                  
                  <div className="form-group">
                    <label>Tel√©fono</label>
                    <input
                      type="tel"
                      name="telefono"
                      className="input-field"
                      value={formData.telefono}
                      onChange={handleInputChange}
                      placeholder="N√∫mero de tel√©fono"
                    />
                  </div>
                  
                  <div className="form-group">
                    <label>Especialidad</label>
                    <select
                      name="especialidad"
                      className="select-field"
                      value={formData.especialidad}
                      onChange={handleInputChange}
                    >
                      <option value="Psicolog√≠a Cl√≠nica">Psicolog√≠a Cl√≠nica</option>
                      <option value="Psicolog√≠a Educativa">Psicolog√≠a Educativa</option>
                      <option value="Psicolog√≠a Organizacional">Psicolog√≠a Organizacional</option>
                      <option value="Neuropsicolog√≠a">Neuropsicolog√≠a</option>
                      <option value="Psicoterapia">Psicoterapia</option>
                    </select>
                  </div>
                </div>
                
                <div className="form-actions">
                  <button 
                    type="submit" 
                    className="btn-primary"
                    disabled={saving}
                  >
                    <FiSave /> {saving ? 'Guardando...' : 'Guardar Cambios'}
                  </button>
                </div>
              </form>
            </div>
          )}

          {/* Seguridad */}
          {activeTab === 'seguridad' && (
            <div className="tab-content">
              <h3>Cambiar Contrase√±a</h3>
              <form onSubmit={handleChangePassword}>
                <div className="form-grid">
                  <div className="form-group">
                    <label>Contrase√±a actual</label>
                    <input
                      type="password"
                      name="currentPassword"
                      className="input-field"
                      value={passwordData.currentPassword}
                      onChange={handlePasswordChange}
                      placeholder="Ingresa tu contrase√±a actual"
                    />
                  </div>
                  
                  <div className="form-group">
                    <label>Nueva contrase√±a</label>
                    <input
                      type="password"
                      name="newPassword"
                      className="input-field"
                      value={passwordData.newPassword}
                      onChange={handlePasswordChange}
                      placeholder="M√≠nimo 6 caracteres"
                    />
                  </div>
                  
                  <div className="form-group">
                    <label>Confirmar nueva contrase√±a</label>
                    <input
                      type="password"
                      name="confirmPassword"
                      className="input-field"
                      value={passwordData.confirmPassword}
                      onChange={handlePasswordChange}
                      placeholder="Repite la nueva contrase√±a"
                    />
                  </div>
                </div>
                
                <div className="form-actions">
                  <button 
                    type="submit" 
                    className="btn-primary"
                    disabled={saving}
                  >
                    <FiSave /> {saving ? 'Cambiando...' : 'Cambiar Contrase√±a'}
                  </button>
                </div>
              </form>
              
              <div className="security-info">
                <h4>Recomendaciones de seguridad:</h4>
                <ul>
                  <li>Usa una contrase√±a con al menos 8 caracteres</li>
                  <li>Incluye may√∫sculas, min√∫sculas, n√∫meros y s√≠mbolos</li>
                  <li>No uses la misma contrase√±a en m√∫ltiples sitios</li>
                  <li>Cambia tu contrase√±a regularmente</li>
                </ul>
              </div>
            </div>
          )}

          {/* Notificaciones */}
          {activeTab === 'notificaciones' && (
            <div className="tab-content">
              <h3>Preferencias de Notificaciones</h3>
              <div className="notifications-list">
                <div className="notification-item">
                  <div>
                    <h4>Notificaciones por Email</h4>
                    <p>Recibe notificaciones por correo electr√≥nico</p>
                  </div>
                  <label className="switch">
                    <input
                      type="checkbox"
                      name="notificacionesEmail"
                      checked={formData.notificacionesEmail}
                      onChange={handleInputChange}
                    />
                    <span className="slider"></span>
                  </label>
                </div>
                
                <div className="notification-item">
                  <div>
                    <h4>Notificaciones por SMS</h4>
                    <p>Recibe notificaciones por mensaje de texto</p>
                  </div>
                  <label className="switch">
                    <input
                      type="checkbox"
                      name="notificacionesSMS"
                      checked={formData.notificacionesSMS}
                      onChange={handleInputChange}
                    />
                    <span className="slider"></span>
                  </label>
                </div>
                
                <div className="notification-item">
                  <div>
                    <h4>Recordatorios de citas</h4>
                    <p>Recuerda a los pacientes 24 horas antes de su cita</p>
                  </div>
                  <label className="switch">
                    <input
                      type="checkbox"
                      defaultChecked
                    />
                    <span className="slider"></span>
                  </label>
                </div>
                
                <div className="notification-item">
                  <div>
                    <h4>Reportes semanales</h4>
                    <p>Recibe un resumen semanal por email</p>
                  </div>
                  <label className="switch">
                    <input
                      type="checkbox"
                      defaultChecked
                    />
                    <span className="slider"></span>
                  </label>
                </div>
              </div>
            </div>
          )}

          {/* Horarios */}
          {activeTab === 'horarios' && (
            <div className="tab-content">
              <h3>Configuraci√≥n de Horarios</h3>
              <form>
                <div className="form-grid">
                  <div className="form-group">
                    <label>Horario de inicio</label>
                    <input
                      type="time"
                      name="horarioInicio"
                      className="input-field"
                      value={formData.horarioInicio}
                      onChange={handleInputChange}
                    />
                  </div>
                  
                  <div className="form-group">
                    <label>Horario de fin</label>
                    <input
                      type="time"
                      name="horarioFin"
                      className="input-field"
                      value={formData.horarioFin}
                      onChange={handleInputChange}
                    />
                  </div>
                  
                  <div className="form-group">
                    <label>Duraci√≥n de citas (minutos)</label>
                    <select
                      name="duracionCita"
                      className="select-field"
                      value={formData.duracionCita}
                      onChange={handleInputChange}
                    >
                      <option value="30">30 minutos</option>
                      <option value="45">45 minutos</option>
                      <option value="60">60 minutos</option>
                      <option value="90">90 minutos</option>
                    </select>
                  </div>
                </div>
                
                <div className="horario-disponibilidad">
                  <h4>D√≠as de atenci√≥n</h4>
                  <div className="dias-grid">
                    {['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado', 'Domingo'].map((dia) => (
                      <div key={dia} className="dia-item">
                        <label className="switch">
                          <input
                            type="checkbox"
                            defaultChecked={dia !== 'Domingo'}
                          />
                          <span className="slider"></span>
                        </label>
                        <span>{dia}</span>
                      </div>
                    ))}
                  </div>
                </div>
                
                <div className="form-actions">
                  <button type="submit" className="btn-primary">
                    <FiSave /> Guardar Horarios
                  </button>
                </div>
              </form>
            </div>
          )}
        </div>
      </div>

      {/* Opciones avanzadas */}
      <div className="advanced-settings">
        <h3>Opciones Avanzadas</h3>
        <div className="advanced-actions">
          <button className="btn-warning">
            <FiDownload /> Exportar Datos
          </button>
          <button className="btn-secondary">
            <FiUpload /> Importar Datos
          </button>
          <button className="btn-danger">
            Limpiar Cache
          </button>
        </div>
      </div>
    </div>
  );
};

export default ConfiguracionPage;

/src\pages\DashboardPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import axios from 'axios';
import { useAuth } from '../context/AuthContext';
import { 
  FiUsers, 
  FiCalendar, 
  FiTrendingUp, 
  FiAlertCircle,
  FiClock,
  FiDollarSign
} from 'react-icons/fi';

const DashboardPage = () => {
  const { token } = useAuth();
  const [stats, setStats] = useState({
    totalPacientes: 0,
    totalCitasHoy: 0,
    totalCitasProximas: 0,
    promedioSesiones: 0,
    ingresosMes: 0,
    citasPendientes: 0
  });
  const [citasProximas, setCitasProximas] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchDashboardData();
  }, [token]);

  const fetchDashboardData = async () => {
    try {
      const response = await axios.get('http://localhost:3000/api/dashboard/estadisticas', {
        headers: { Authorization: `Bearer ${token}` }
      });
      
      if (response.data) {
        setStats(response.data);
      }
      
      // Simular datos de citas pr√≥ximas (en un proyecto real vendr√≠a del backend)
      setCitasProximas([
        { id: 1, paciente: 'Juan P√©rez', hora: '10:00 AM', estado: 'confirmada' },
        { id: 2, paciente: 'Mar√≠a Garc√≠a', hora: '11:30 AM', estado: 'pendiente' },
        { id: 3, paciente: 'Carlos L√≥pez', hora: '2:00 PM', estado: 'confirmada' },
        { id: 4, paciente: 'Ana Mart√≠nez', hora: '4:30 PM', estado: 'cancelada' },
      ]);
    } catch (error) {
      console.error('Error fetching dashboard data:', error);
    } finally {
      setLoading(false);
    }
  };

  const statCards = [
    {
      title: 'Total Pacientes',
      value: stats.totalPacientes,
      icon: <FiUsers size={24} />,
      color: 'var(--blu)',
      change: '+12% este mes'
    },
    {
      title: 'Citas Hoy',
      value: stats.totalCitasHoy,
      icon: <FiCalendar size={24} />,
      color: 'var(--grnb)',
      change: `${stats.citasPendientes} pendientes`
    },
    {
      title: 'Pr√≥ximas Citas',
      value: stats.totalCitasProximas,
      icon: <FiClock size={24} />,
      color: 'var(--yy)',
      change: 'Pr√≥ximos 7 d√≠as'
    },
    {
      title: 'Ingresos del Mes',
      value: `$${stats.ingresosMes.toLocaleString()}`,
      icon: <FiDollarSign size={24} />,
      color: 'var(--grnd)',
      change: '+8% vs mes anterior'
    },
    {
      title: 'Promedio Sesiones',
      value: stats.promedioSesiones,
      icon: <FiTrendingUp size={24} />,
      color: 'var(--grnl)',
      change: 'por paciente'
    },
    {
      title: 'Alertas',
      value: stats.citasPendientes,
      icon: <FiAlertCircle size={24} />,
      color: 'var(--rr)',
      change: 'Requieren atenci√≥n'
    }
  ];

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando dashboard...</div>
      </div>
    );
  }

  return (
    <div className="dashboard-page">
      <div className="page-header">
        <h1>Dashboard</h1>
        <p>Resumen general del consultorio</p>
      </div>

      {/* Stats Grid */}
      <div className="stats-grid">
        {statCards.map((stat, index) => (
          <div key={index} className="stat-card">
            <div className="stat-header">
              <div className="stat-icon" style={{ color: stat.color }}>
                {stat.icon}
              </div>
              <h3>{stat.title}</h3>
            </div>
            <div className="stat-value">{stat.value}</div>
            <div className="stat-change">{stat.change}</div>
          </div>
        ))}
      </div>

      {/* Content Grid */}
      <div className="dashboard-content-grid">
        {/* Pr√≥ximas Citas */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Pr√≥ximas Citas</h3>
            <button className="btn-text">Ver todas</button>
          </div>
          
          <div className="citas-list">
            {citasProximas.map((cita) => (
              <div key={cita.id} className="cita-item">
                <div className="cita-info">
                  <div className="cita-paciente">{cita.paciente}</div>
                  <div className="cita-hora">{cita.hora}</div>
                </div>
                <div className={`cita-estado badge ${
                  cita.estado === 'confirmada' ? 'badge-success' :
                  cita.estado === 'pendiente' ? 'badge-warning' :
                  'badge-danger'
                }`}>
                  {cita.estado}
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Gr√°fico de Actividad (Placeholder) */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Actividad Semanal</h3>
          </div>
          <div className="activity-chart">
            <div className="chart-placeholder">
              <p>Gr√°fico de actividad semanal</p>
              <div className="chart-bars">
                {[65, 80, 45, 90, 75, 60, 85].map((height, index) => (
                  <div key={index} className="chart-bar">
                    <div 
                      className="bar-fill"
                      style={{ height: `${height}%` }}
                    ></div>
                    <div className="bar-label">
                      {['Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b', 'Dom'][index]}
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>

        {/* Pacientes Recientes */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Pacientes Recientes</h3>
            <button className="btn-text">Ver todos</button>
          </div>
          
          <div className="pacientes-list">
            {[
              { id: 1, nombre: 'Juan P√©rez', ultimaSesion: '2024-01-10', progreso: 75 },
              { id: 2, nombre: 'Mar√≠a Garc√≠a', ultimaSesion: '2024-01-09', progreso: 60 },
              { id: 3, nombre: 'Carlos L√≥pez', ultimaSesion: '2024-01-08', progreso: 90 },
              { id: 4, nombre: 'Ana Mart√≠nez', ultimaSesion: '2024-01-07', progreso: 45 },
              { id: 5, nombre: 'Roberto D√≠az', ultimaSesion: '2024-01-06', progreso: 30 },
            ].map((paciente) => (
              <div key={paciente.id} className="paciente-item">
                <div className="paciente-info">
                  <div className="paciente-nombre">{paciente.nombre}</div>
                  <div className="paciente-fecha">
                    √öltima: {new Date(paciente.ultimaSesion).toLocaleDateString()}
                  </div>
                </div>
                <div className="paciente-progreso">
                  <div className="progress-container">
                    <div 
                      className="progress-bar"
                      style={{ width: `${paciente.progreso}%` }}
                    ></div>
                  </div>
                  <span className="progreso-text">{paciente.progreso}%</span>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Quick Actions */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Acciones R√°pidas</h3>
          </div>
          
          <div className="quick-actions">
            <button className="btn-primary w-100 mb-10">
              Agendar Nueva Cita
            </button>
            <button className="btn-secondary w-100 mb-10">
              Registrar Nuevo Paciente
            </button>
            <button className="btn-warning w-100 mb-10">
              Generar Reporte Mensual
            </button>
            <button className="btn-text w-100">
              Ver Calendario Completo
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default DashboardPage;

/src\pages\PacientesPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiSearch, FiUserPlus, FiEdit, FiTrash2, FiFilter } from 'react-icons/fi';

const PacientesPage = () => {
  const [pacientes, setPacientes] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [showModal, setShowModal] = useState(false);

  useEffect(() => {
    // Simular carga de datos
    setTimeout(() => {
      setPacientes([
        {
          id: 1,
          nombre: 'Juan P√©rez',
          email: 'juan@email.com',
          telefono: '555-1234',
          edad: 35,
          diagnostico: 'Ansiedad generalizada',
          ultimaSesion: '2024-01-10',
          proximaCita: '2024-01-17',
          estado: 'activo'
        },
        {
          id: 2,
          nombre: 'Mar√≠a Garc√≠a',
          email: 'maria@email.com',
          telefono: '555-5678',
          edad: 28,
          diagnostico: 'Depresi√≥n moderada',
          ultimaSesion: '2024-01-09',
          proximaCita: '2024-01-16',
          estado: 'activo'
        },
        {
          id: 3,
          nombre: 'Carlos L√≥pez',
          email: 'carlos@email.com',
          telefono: '555-9012',
          edad: 42,
          diagnostico: 'Trastorno de estr√©s postraum√°tico',
          ultimaSesion: '2024-01-08',
          proximaCita: '2024-01-15',
          estado: 'inactivo'
        },
        {
          id: 4,
          nombre: 'Ana Mart√≠nez',
          email: 'ana@email.com',
          telefono: '555-3456',
          edad: 31,
          diagnostico: 'Fobia social',
          ultimaSesion: '2024-01-07',
          proximaCita: '2024-01-14',
          estado: 'activo'
        },
        {
          id: 5,
          nombre: 'Roberto D√≠az',
          email: 'roberto@email.com',
          telefono: '555-7890',
          edad: 39,
          diagnostico: 'Trastorno obsesivo-compulsivo',
          ultimaSesion: '2024-01-06',
          proximaCita: '2024-01-13',
          estado: 'pendiente'
        }
      ]);
      setLoading(false);
    }, 1000);
  }, []);

  const filteredPacientes = pacientes.filter(paciente =>
    paciente.nombre.toLowerCase().includes(searchTerm.toLowerCase()) ||
    paciente.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
    paciente.diagnostico.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const handleDelete = (id) => {
    if (window.confirm('¬øEst√°s seguro de eliminar este paciente?')) {
      setPacientes(pacientes.filter(p => p.id !== id));
    }
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando pacientes...</div>
      </div>
    );
  }

  return (
    <div className="pacientes-page">
      <div className="page-header">
        <div>
          <h1>Pacientes</h1>
          <p>Gesti√≥n de pacientes del consultorio</p>
        </div>
        <button 
          className="btn-primary"
          onClick={() => setShowModal(true)}
        >
          <FiUserPlus /> Nuevo Paciente
        </button>
      </div>

      {/* Search and Filters */}
      <div className="filters-container">
        <div className="search-box">
          <FiSearch />
          <input
            type="text"
            className="search-input"
            placeholder="Buscar paciente por nombre, email o diagn√≥stico..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
          />
        </div>
        
        <div className="filter-buttons">
          <button className="btn-secondary">
            <FiFilter /> Filtrar
          </button>
          <select className="select-field" style={{ width: '200px' }}>
            <option value="">Todos los estados</option>
            <option value="activo">Activos</option>
            <option value="inactivo">Inactivos</option>
            <option value="pendiente">Pendientes</option>
          </select>
        </div>
      </div>

      {/* Patients Table */}
      <div className="table-container">
        <table className="data-table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Contacto</th>
              <th>Edad</th>
              <th>Diagn√≥stico</th>
              <th>√öltima Sesi√≥n</th>
              <th>Pr√≥xima Cita</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {filteredPacientes.map((paciente) => (
              <tr key={paciente.id}>
                <td>
                  <div className="flex-row align-center gap-10">
                    <div className="avatar">
                      {paciente.nombre.split(' ').map(n => n[0]).join('')}
                    </div>
                    <div>
                      <div className="font-bold">{paciente.nombre}</div>
                    </div>
                  </div>
                </td>
                <td>
                  <div>{paciente.email}</div>
                  <div className="text-small">{paciente.telefono}</div>
                </td>
                <td>{paciente.edad} a√±os</td>
                <td>
                  <div className="diagnostico-tag">
                    {paciente.diagnostico}
                  </div>
                </td>
                <td>
                  {new Date(paciente.ultimaSesion).toLocaleDateString()}
                </td>
                <td>
                  {new Date(paciente.proximaCita).toLocaleDateString()}
                </td>
                <td>
                  <span className={`badge ${
                    paciente.estado === 'activo' ? 'badge-success' :
                    paciente.estado === 'inactivo' ? 'badge-danger' :
                    'badge-warning'
                  }`}>
                    {paciente.estado}
                  </span>
                </td>
                <td>
                  <div className="flex-row gap-5">
                    <button 
                      className="btn-text"
                      title="Editar"
                    >
                      <FiEdit />
                    </button>
                    <button 
                      className="btn-text text-danger"
                      onClick={() => handleDelete(paciente.id)}
                      title="Eliminar"
                    >
                      <FiTrash2 />
                    </button>
                  </div>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      {/* Pagination */}
      <div className="pagination">
        <button className="page-item">¬´</button>
        <button className="page-item active">1</button>
        <button className="page-item">2</button>
        <button className="page-item">3</button>
        <button className="page-item">¬ª</button>
      </div>

      {/* Modal para nuevo paciente (placeholder) */}
      {showModal && (
        <div className="modal-overlay">
          <div className="modal-container">
            <div className="modal-header">
              <h3 className="modal-title">Nuevo Paciente</h3>
              <button 
                className="modal-close"
                onClick={() => setShowModal(false)}
              >
                √ó
              </button>
            </div>
            <div className="modal-content">
              <p>Formulario para nuevo paciente...</p>
            </div>
            <div className="modal-footer">
              <button 
                className="btn-primary"
                onClick={() => setShowModal(false)}
              >
                Guardar
              </button>
              <button 
                className="btn-danger"
                onClick={() => setShowModal(false)}
              >
                Cancelar
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default PacientesPage;

/src\pages\becario\CitasPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { 
  FiCalendar, FiClock, FiUser, FiPlus, 
  FiChevronLeft, FiChevronRight, FiFilter,
  FiCheckCircle, FiXCircle, FiEdit2
} from 'react-icons/fi';
import { format, addDays, subDays } from 'date-fns';
import { es } from 'date-fns/locale';

const BecarioCitas = () => {
  const [citas, setCitas] = useState([]);
  const [selectedDate, setSelectedDate] = useState(new Date());
  const [loading, setLoading] = useState(true);
  const [view, setView] = useState('day');
  const [showNuevaCitaModal, setShowNuevaCitaModal] = useState(false);
  const [filterEstado, setFilterEstado] = useState('');

  useEffect(() => {
    fetchCitas();
  }, [selectedDate, filterEstado]);

  const fetchCitas = async () => {
    try {
      setLoading(true);
      const token = localStorage.getItem('token');
      const fecha = format(selectedDate, 'yyyy-MM-dd');
      
      let url = `http://localhost:3000/api/citas/citas-por-fecha?fecha=${fecha}`;
      
      const response = await fetch(url, {
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        }
      });
      
      if (response.ok) {
        const data = await response.json();
        
        // Filtrar por estado si se especifica
        let citasFiltradas = data.data || [];
        if (filterEstado) {
          citasFiltradas = citasFiltradas.filter(cita => cita.estado === filterEstado);
        }
        
        setCitas(citasFiltradas);
      }
    } catch (error) {
      console.error('Error al obtener citas:', error);
    } finally {
      setLoading(false);
    }
  };

  const goToPreviousDay = () => {
    setSelectedDate(prev => subDays(prev, 1));
  };

  const goToNextDay = () => {
    setSelectedDate(prev => addDays(prev, 1));
  };

  const goToToday = () => {
    setSelectedDate(new Date());
  };

  const handleEstadoCita = async (citaId, nuevoEstado) => {
    try {
      const token = localStorage.getItem('token');
      
      const response = await fetch(`http://localhost:3000/api/citas/cita/${citaId}`, {
        method: 'PUT',
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ estado: nuevoEstado })
      });
      
      if (response.ok) {
        fetchCitas();
        alert(`Cita ${nuevoEstado === 'completada' ? 'completada' : 'cancelada'} exitosamente`);
      }
    } catch (error) {
      console.error('Error al actualizar cita:', error);
      alert('Error al actualizar la cita');
    }
  };

  const formatDateSpanish = (date) => {
    return format(date, "EEEE d 'de' MMMM, yyyy", { locale: es });
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando citas...</div>
      </div>
    );
  }

  return (
    <div className="citas-page">
      <div className="page-header">
        <div>
          <h1>Mis Citas</h1>
          <p>Gesti√≥n de citas asignadas</p>
        </div>
        <div className="flex-row gap-10">
          <button 
            className="btn-primary"
            onClick={() => setShowNuevaCitaModal(true)}
          >
            <FiPlus /> Nueva Cita
          </button>
        </div>
      </div>

      <div className="calendar-controls">
        <div className="view-selector">
          <button 
            className={`btn-text ${view === 'day' ? 'active' : ''}`}
            onClick={() => setView('day')}
          >
            D√≠a
          </button>
          <button 
            className={`btn-text ${view === 'week' ? 'active' : ''}`}
            onClick={() => setView('week')}
          >
            Semana
          </button>
        </div>

        <div className="date-navigation">
          <button className="btn-text" onClick={goToPreviousDay}>
            <FiChevronLeft /> Ayer
          </button>
          
          <div className="current-date">
            <h3>{formatDateSpanish(selectedDate)}</h3>
          </div>
          
          <button className="btn-text" onClick={goToNextDay}>
            Ma√±ana <FiChevronRight />
          </button>
        </div>

        <div className="quick-actions">
          <button className="btn-secondary" onClick={goToToday}>
            Hoy
          </button>
          <div className="filter-select">
            <select 
              value={filterEstado} 
              onChange={(e) => setFilterEstado(e.target.value)}
              className="form-select"
              style={{ width: '150px' }}
            >
              <option value="">Todos los estados</option>
              <option value="programada">Programadas</option>
              <option value="confirmada">Confirmadas</option>
              <option value="completada">Completadas</option>
              <option value="cancelada">Canceladas</option>
            </select>
          </div>
        </div>
      </div>

      {/* Lista de Citas */}
      <div className="day-citas-list">
        <h3>Citas para {formatDateSpanish(selectedDate)} ({citas.length})</h3>
        
        {citas.length > 0 ? (
          <div className="citas-cards">
            {citas.map((cita) => (
              <div key={cita.id} className="cita-card">
                <div className="cita-card-header">
                  <div className="cita-time">
                    <FiClock /> {cita.hora} ({cita.duracion || 50} min)
                  </div>
                  <div className={`cita-status badge ${
                    cita.estado === 'confirmada' ? 'badge-success' :
                    cita.estado === 'completada' ? 'badge-primary' :
                    cita.estado === 'programada' ? 'badge-warning' :
                    'badge-danger'
                  }`}>
                    {cita.estado}
                  </div>
                </div>
                
                <div className="cita-card-body">
                  <div className="cita-paciente">
                    <FiUser /> {cita.paciente_nombre || 'Paciente'}
                  </div>
                  
                  <div className="cita-info">
                    <div className="cita-tipo">
                      {cita.tipo_consulta === 'presencial' ? 'üìã Presencial' : 'üíª Virtual'}
                    </div>
                    
                    {cita.paciente_telefono && (
                      <div className="cita-contacto">
                        üìû {cita.paciente_telefono}
                      </div>
                    )}
                    
                    {cita.psicologo_nombre && (
                      <div className="cita-psicologo">
                        üë®‚Äç‚öïÔ∏è {cita.psicologo_nombre}
                      </div>
                    )}
                    
                    {cita.notas && (
                      <div className="cita-notas">
                        <strong>Notas:</strong> {cita.notas}
                      </div>
                    )}
                  </div>
                </div>
                
                <div className="cita-card-footer">
                  <button className="btn-text">
                    <FiEdit2 /> Editar
                  </button>
                  
                  {cita.estado === 'confirmada' && (
                    <button 
                      className="btn-text text-success"
                      onClick={() => handleEstadoCita(cita.id, 'completada')}
                    >
                      <FiCheckCircle /> Completar
                    </button>
                  )}
                  
                  {(cita.estado === 'programada' || cita.estado === 'confirmada') && (
                    <button 
                      className="btn-text text-danger"
                      onClick={() => handleEstadoCita(cita.id, 'cancelada')}
                    >
                      <FiXCircle /> Cancelar
                    </button>
                  )}
                </div>
              </div>
            ))}
          </div>
        ) : (
          <div className="no-citas">
            <div className="no-citas-icon">üìÖ</div>
            <div>No hay citas programadas para este d√≠a</div>
            <button 
              className="btn-text" 
              onClick={() => setShowNuevaCitaModal(true)}
            >
              Agendar nueva cita
            </button>
          </div>
        )}
      </div>

      {/* Modal para nueva cita (simplificado) */}
      {showNuevaCitaModal && (
        <div className="modal-overlay">
          <div className="modal-container">
            <div className="modal-header">
              <h3>Nueva Cita</h3>
              <button className="modal-close" onClick={() => setShowNuevaCitaModal(false)}>√ó</button>
            </div>
            <div className="modal-content">
              <p>Funcionalidad de nueva cita. Esta funci√≥n est√° en desarrollo.</p>
              <p>Por ahora, contacta al coordinador para agendar nuevas citas.</p>
            </div>
            <div className="modal-footer">
              <button className="btn-secondary" onClick={() => setShowNuevaCitaModal(false)}>
                Cerrar
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default BecarioCitas;

/src\pages\becario\DashboardPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { 
  FiCalendar, FiUsers, FiClock, FiBell, 
  FiTrendingUp, FiAlertCircle, FiRefreshCw 
} from 'react-icons/fi';
import { format } from 'date-fns';
import { es } from 'date-fns/locale';

const BecarioDashboard = () => {
  const [estadisticas, setEstadisticas] = useState({
    citasHoy: 0,
    citasProximas: 0,
    pacientesAsignados: 0,
    observacionesPendientes: 0,
    notificacionesSinLeer: 0,
    citasCompletadas: 0
  });
  const [citasHoy, setCitasHoy] = useState([]);
  const [notificaciones, setNotificaciones] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchDashboardData();
  }, []);

  const fetchDashboardData = async () => {
    try {
      const token = localStorage.getItem('token');
      
      // Obtener estad√≠sticas
      const statsResponse = await fetch('http://localhost:3000/api/roles/my-role-info', {
        headers: { 'Authorization': `Bearer ${token}` }
      });
      
      if (statsResponse.ok) {
        const statsData = await statsResponse.json();
        setEstadisticas(statsData.data.estadisticas || {
          citasHoy: 3,
          pacientesAsignados: 2,
          observacionesPendientes: 1
        });
      }
      
      // Obtener citas de hoy
      const today = format(new Date(), 'yyyy-MM-dd');
      const citasResponse = await fetch(`http://localhost:3000/api/citas/citas-por-fecha?fecha=${today}`, {
        headers: { 'Authorization': `Bearer ${token}` }
      });
      
      if (citasResponse.ok) {
        const citasData = await citasResponse.json();
        setCitasHoy(citasData.data || []);
      }
      
      // Obtener notificaciones
      const notifResponse = await fetch('http://localhost:3000/api/notificaciones/mis-notificaciones', {
        headers: { 'Authorization': `Bearer ${token}` }
      });
      
      if (notifResponse.ok) {
        const notifData = await notifResponse.json();
        setNotificaciones(notifData.data || []);
      }
      
    } catch (error) {
      console.error('Error cargando dashboard:', error);
    } finally {
      setLoading(false);
    }
  };

  const statCards = [
    {
      title: 'Citas Hoy',
      value: estadisticas.citasHoy,
      icon: <FiCalendar />,
      color: 'var(--grnb)',
      change: 'Programadas para hoy'
    },
    {
      title: 'Pacientes Asignados',
      value: estadisticas.pacientesAsignados,
      icon: <FiUsers />,
      color: 'var(--blu)',
      change: 'A tu cargo'
    },
    {
      title: 'Pr√≥ximas Citas',
      value: estadisticas.citasProximas || 5,
      icon: <FiClock />,
      color: 'var(--yy)',
      change: 'Pr√≥ximos 7 d√≠as'
    },
    {
      title: 'Notificaciones',
      value: estadisticas.notificacionesSinLeer || notificaciones.filter(n => !n.leida).length,
      icon: <FiBell />,
      color: 'var(--rr)',
      change: 'Sin leer'
    },
    {
      title: 'Observaciones Pendientes',
      value: estadisticas.observacionesPendientes,
      icon: <FiTrendingUp />,
      color: 'var(--grnd)',
      change: 'Por registrar'
    },
    {
      title: 'Citas Completadas',
      value: estadisticas.citasCompletadas || 12,
      icon: <FiAlertCircle />,
      color: 'var(--grnl)',
      change: 'Este mes'
    }
  ];

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando panel del becario...</div>
      </div>
    );
  }

  return (
    <div className="dashboard-page">
      <div className="page-header">
        <div>
          <h1>Panel del Becario</h1>
          <p>Bienvenido a tu centro de gesti√≥n de citas y pacientes</p>
        </div>
        <button className="btn-secondary" onClick={fetchDashboardData}>
          <FiRefreshCw /> Actualizar
        </button>
      </div>

      {/* Stats Grid */}
      <div className="stats-grid">
        {statCards.map((stat, index) => (
          <div key={index} className="stat-card">
            <div className="stat-header">
              <div className="stat-icon" style={{ color: stat.color }}>
                {stat.icon}
              </div>
              <h3>{stat.title}</h3>
            </div>
            <div className="stat-value">{stat.value}</div>
            <div className="stat-change">{stat.change}</div>
          </div>
        ))}
      </div>

      {/* Main Content Grid */}
      <div className="dashboard-content-grid">
        {/* Citas de Hoy */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Citas de Hoy</h3>
            <button className="btn-text">Ver Calendario</button>
          </div>
          
          <div className="citas-list">
            {citasHoy.length > 0 ? (
              citasHoy.slice(0, 5).map((cita) => (
                <div key={cita.id} className="cita-item">
                  <div className="cita-info">
                    <div className="cita-paciente">{cita.paciente_nombre}</div>
                    <div className="cita-hora">{cita.hora}</div>
                  </div>
                  <div className={`cita-estado badge ${
                    cita.estado === 'confirmada' ? 'badge-success' :
                    cita.estado === 'programada' ? 'badge-warning' :
                    'badge-danger'
                  }`}>
                    {cita.estado}
                  </div>
                </div>
              ))
            ) : (
              <div className="no-citas">
                <div className="no-citas-icon">üìÖ</div>
                <div>No hay citas programadas para hoy</div>
              </div>
            )}
          </div>
        </div>

        {/* Notificaciones Recientes */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Notificaciones Recientes</h3>
            <button className="btn-text">Ver todas</button>
          </div>
          
          <div className="notifications-list">
            {notificaciones.slice(0, 5).map((notif) => (
              <div key={notif.id} className={`notification-item ${!notif.leida ? 'unread' : ''}`}>
                <div>
                  <h4>{notif.titulo}</h4>
                  <p>{notif.mensaje}</p>
                  <small>{new Date(notif.fecha_notificacion).toLocaleTimeString()}</small>
                </div>
                {!notif.leida && <span className="badge badge-info">Nuevo</span>}
              </div>
            ))}
            
            {notificaciones.length === 0 && (
              <div className="no-citas">
                <div className="no-citas-icon">üîî</div>
                <div>No hay notificaciones</div>
              </div>
            )}
          </div>
        </div>

        {/* Pacientes Asignados */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Mis Pacientes</h3>
            <button className="btn-text">Ver todos</button>
          </div>
          
          <div className="pacientes-list">
            {[
              { id: 1, nombre: 'Carlos G√≥mez', ultimaSesion: '2024-01-10' },
              { id: 2, nombre: 'Mariana L√≥pez', ultimaSesion: '2024-01-09' },
              { id: 3, nombre: 'Ana Mart√≠nez', ultimaSesion: '2024-01-08' }
            ].map((paciente) => (
              <div key={paciente.id} className="paciente-item">
                <div className="paciente-info">
                  <div className="paciente-nombre">{paciente.nombre}</div>
                  <div className="paciente-fecha">
                    √öltima sesi√≥n: {new Date(paciente.ultimaSesion).toLocaleDateString()}
                  </div>
                </div>
                <button className="btn-text">Ver</button>
              </div>
            ))}
          </div>
        </div>

        {/* Quick Actions */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Acciones R√°pidas</h3>
          </div>
          
          <div className="quick-actions">
            <button className="btn-primary w-100 mb-10">
              Ver Mis Citas
            </button>
            <button className="btn-secondary w-100 mb-10">
              Registrar Observaci√≥n
            </button>
            <button className="btn-warning w-100 mb-10">
              Marcar Cita como Completada
            </button>
            <button className="btn-text w-100">
              Ver Calendario Completo
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default BecarioDashboard;

/src\pages\becario\NotificacionesPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiBell, FiCheckCircle, FiClock, FiCalendar, FiMessageSquare } from 'react-icons/fi';

const BecarioNotificaciones = () => {
  const [notificaciones, setNotificaciones] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchNotificaciones();
  }, []);

  const fetchNotificaciones = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setNotificaciones([
          {
            id: 1,
            tipo: 'cita_modificada',
            titulo: 'Cita modificada',
            mensaje: 'La cita con Carlos G√≥mez ha sido reprogramada para ma√±ana a las 11:00 AM',
            fecha: '2024-01-10 09:30:00',
            leida: false
          },
          {
            id: 2,
            tipo: 'cita_nueva',
            titulo: 'Nueva cita asignada',
            mensaje: 'Tienes una nueva cita con Mariana L√≥pez para el viernes 12 de enero',
            fecha: '2024-01-09 14:15:00',
            leida: true
          },
          {
            id: 3,
            tipo: 'sistema',
            titulo: 'Recordatorio de observaci√≥n',
            mensaje: 'Recuerda registrar las observaciones de la sesi√≥n con Roberto S√°nchez',
            fecha: '2024-01-08 16:45:00',
            leida: false
          },
          {
            id: 4,
            tipo: 'mensaje',
            titulo: 'Mensaje del psic√≥logo',
            mensaje: 'Por favor, prepara el informe del paciente Carlos G√≥mez para la supervisi√≥n',
            fecha: '2024-01-07 10:20:00',
            leida: true
          }
        ]);
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al obtener notificaciones:', error);
      setLoading(false);
    }
  };

  const marcarComoLeida = async (notifId) => {
    setNotificaciones(prev => 
      prev.map(notif => 
        notif.id === notifId ? { ...notif, leida: true } : notif
      )
    );
  };

  const marcarTodasComoLeidas = () => {
    setNotificaciones(prev => 
      prev.map(notif => ({ ...notif, leida: true }))
    );
  };

  const getIconByTipo = (tipo) => {
    switch (tipo) {
      case 'cita_nueva':
      case 'cita_modificada':
        return <FiCalendar />;
      case 'sistema':
        return <FiBell />;
      case 'mensaje':
        return <FiMessageSquare />;
      default:
        return <FiBell />;
    }
  };

  const getColorByTipo = (tipo) => {
    switch (tipo) {
      case 'cita_nueva':
        return 'var(--grnb)';
      case 'cita_modificada':
        return 'var(--yy)';
      case 'sistema':
        return 'var(--blu)';
      case 'mensaje':
        return 'var(--grnd)';
      default:
        return 'var(--gray)';
    }
  };

  const notificacionesNoLeidas = notificaciones.filter(n => !n.leida).length;

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando notificaciones...</div>
      </div>
    );
  }

  return (
    <div className="configuracion-page">
      <div className="page-header">
        <div>
          <h1>Notificaciones</h1>
          <p>Mensajes y alertas del sistema</p>
        </div>
        <div className="flex-row gap-10">
          {notificacionesNoLeidas > 0 && (
            <button className="btn-secondary" onClick={marcarTodasComoLeidas}>
              <FiCheckCircle /> Marcar todas como le√≠das
            </button>
          )}
        </div>
      </div>

      <div className="configuracion-container">
        <div className="config-content">
          <div className="notifications-list">
            {notificaciones.map((notif) => (
              <div 
                key={notif.id} 
                className={`notification-item ${!notif.leida ? 'unread' : ''}`}
                style={{ borderLeftColor: getColorByTipo(notif.tipo) }}
              >
                <div className="notification-icon" style={{ color: getColorByTipo(notif.tipo) }}>
                  {getIconByTipo(notif.tipo)}
                </div>
                
                <div className="notification-content">
                  <div className="notification-header">
                    <h4>{notif.titulo}</h4>
                    <div className="notification-time">
                      <FiClock size={12} />
                      {new Date(notif.fecha).toLocaleDateString()} {new Date(notif.fecha).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                    </div>
                  </div>
                  
                  <p>{notif.mensaje}</p>
                  
                  {!notif.leida && (
                    <button 
                      className="btn-text text-small"
                      onClick={() => marcarComoLeida(notif.id)}
                    >
                      <FiCheckCircle /> Marcar como le√≠da
                    </button>
                  )}
                </div>
                
                {!notif.leida && (
                  <span className="badge badge-info">Nuevo</span>
                )}
              </div>
            ))}
            
            {notificaciones.length === 0 && (
              <div className="no-citas">
                <div className="no-citas-icon">üîî</div>
                <div>No hay notificaciones</div>
                <p className="text-small mt-10">Las notificaciones aparecer√°n aqu√≠ cuando tengas nuevas alertas</p>
              </div>
            )}
          </div>
          
          <div className="mt-20">
            <h4>Tipos de notificaciones</h4>
            <div className="grid-4 mt-10">
              <div className="notification-type">
                <div className="notification-type-icon" style={{ color: 'var(--grnb)' }}>
                  <FiCalendar />
                </div>
                <div className="notification-type-info">
                  <strong>Citas</strong>
                  <p>Nuevas citas, modificaciones y recordatorios</p>
                </div>
              </div>
              
              <div className="notification-type">
                <div className="notification-type-icon" style={{ color: 'var(--blu)' }}>
                  <FiBell />
                </div>
                <div className="notification-type-info">
                  <strong>Sistema</strong>
                  <p>Alertas y recordatorios del sistema</p>
                </div>
              </div>
              
              <div className="notification-type">
                <div className="notification-type-icon" style={{ color: 'var(--grnd)' }}>
                  <FiMessageSquare />
                </div>
                <div className="notification-type-info">
                  <strong>Mensajes</strong>
                  <p>Comunicaci√≥n con psic√≥logos y coordinadores</p>
                </div>
              </div>
              
              <div className="notification-type">
                <div className="notification-type-icon" style={{ color: 'var(--yy)' }}>
                  <FiCheckCircle />
                </div>
                <div className="notification-type-info">
                  <strong>Tareas</strong>
                  <p>Recordatorios de tareas pendientes</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default BecarioNotificaciones;

/src\pages\becario\ObservacionesPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiFileText, FiPlus, FiEdit2, FiTrash2, FiCalendar, FiUser, FiSave } from 'react-icons/fi';

const BecarioObservaciones = () => {
  const [observaciones, setObservaciones] = useState([]);
  const [loading, setLoading] = useState(true);
  const [showForm, setShowForm] = useState(false);
  const [formData, setFormData] = useState({
    paciente_id: '',
    fecha: new Date().toISOString().split('T')[0],
    observaciones: '',
    dificultades: '',
    logros: '',
    preguntas_supervisor: ''
  });
  const [pacientes, setPacientes] = useState([]);

  useEffect(() => {
    fetchData();
  }, []);

  const fetchData = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setPacientes([
          { id: 1, nombre: 'Carlos G√≥mez' },
          { id: 2, nombre: 'Mariana L√≥pez' },
          { id: 3, nombre: 'Roberto S√°nchez' }
        ]);
        
        setObservaciones([
          {
            id: 1,
            paciente_nombre: 'Carlos G√≥mez',
            fecha: '2024-01-10',
            observaciones: 'El paciente mostr√≥ mejor√≠a en su manejo de la ansiedad durante la sesi√≥n.',
            dificultades: 'A√∫n presenta resistencia para hablar sobre ciertos temas familiares.',
            logros: 'Logr√≥ identificar tres t√©cnicas de relajaci√≥n que le funcionan.',
            preguntas_supervisor: '¬øC√≥mo abordar la resistencia a temas familiares?'
          },
          {
            id: 2,
            paciente_nombre: 'Mariana L√≥pez',
            fecha: '2024-01-09',
            observaciones: 'La paciente trabaj√≥ en estrategias para manejar el estr√©s laboral.',
            dificultades: 'Dificultad para establecer l√≠mites en el trabajo.',
            logros: 'Identific√≥ patrones de pensamiento que generan estr√©s.',
            preguntas_supervisor: '¬øSugerencias para ejercicios de asertividad?'
          }
        ]);
        
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al cargar datos:', error);
      setLoading(false);
    }
  };

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData({
      ...formData,
      [name]: value
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    
    // En un proyecto real, aqu√≠ enviar√≠amos al backend
    const nuevaObservacion = {
      id: observaciones.length + 1,
      paciente_nombre: pacientes.find(p => p.id == formData.paciente_id)?.nombre || 'Paciente',
      ...formData
    };
    
    setObservaciones([nuevaObservacion, ...observaciones]);
    setShowForm(false);
    setFormData({
      paciente_id: '',
      fecha: new Date().toISOString().split('T')[0],
      observaciones: '',
      dificultades: '',
      logros: '',
      preguntas_supervisor: ''
    });
    
    alert('Observaci√≥n registrada exitosamente');
  };

  const handleDelete = (id) => {
    if (window.confirm('¬øEst√°s seguro de eliminar esta observaci√≥n?')) {
      setObservaciones(observaciones.filter(o => o.id !== id));
    }
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando observaciones...</div>
      </div>
    );
  }

  return (
    <div className="configuracion-page">
      <div className="page-header">
        <div>
          <h1>Observaciones de Sesiones</h1>
          <p>Registro de observaciones para supervisi√≥n</p>
        </div>
        <button 
          className="btn-primary"
          onClick={() => setShowForm(true)}
        >
          <FiPlus /> Nueva Observaci√≥n
        </button>
      </div>

      {/* Formulario de Nueva Observaci√≥n */}
      {showForm && (
        <div className="card mb-20">
          <div className="modal-header">
            <h3>Nueva Observaci√≥n</h3>
            <button className="modal-close" onClick={() => setShowForm(false)}>√ó</button>
          </div>
          
          <form onSubmit={handleSubmit}>
            <div className="form-grid">
              <div className="form-group">
                <label>Paciente</label>
                <select
                  name="paciente_id"
                  value={formData.paciente_id}
                  onChange={handleInputChange}
                  className="select-field"
                  required
                >
                  <option value="">Seleccionar paciente</option>
                  {pacientes.map(paciente => (
                    <option key={paciente.id} value={paciente.id}>
                      {paciente.nombre}
                    </option>
                  ))}
                </select>
              </div>
              
              <div className="form-group">
                <label>Fecha de sesi√≥n</label>
                <input
                  type="date"
                  name="fecha"
                  value={formData.fecha}
                  onChange={handleInputChange}
                  className="input-field"
                  required
                />
              </div>
              
              <div className="form-group" style={{ gridColumn: 'span 2' }}>
                <label>Observaciones generales</label>
                <textarea
                  name="observaciones"
                  value={formData.observaciones}
                  onChange={handleInputChange}
                  className="textarea-field"
                  rows="4"
                  required
                  placeholder="Describe lo observado durante la sesi√≥n..."
                />
              </div>
              
              <div className="form-group">
                <label>Dificultades encontradas</label>
                <textarea
                  name="dificultades"
                  value={formData.dificultades}
                  onChange={handleInputChange}
                  className="textarea-field"
                  rows="3"
                  placeholder="Dificultades o resistencias observadas..."
                />
              </div>
              
              <div className="form-group">
                <label>Logros del paciente</label>
                <textarea
                  name="logros"
                  value={formData.logros}
                  onChange={handleInputChange}
                  className="textarea-field"
                  rows="3"
                  placeholder="Avances y logros observados..."
                />
              </div>
              
              <div className="form-group" style={{ gridColumn: 'span 2' }}>
                <label>Preguntas para el supervisor</label>
                <textarea
                  name="preguntas_supervisor"
                  value={formData.preguntas_supervisor}
                  onChange={handleInputChange}
                  className="textarea-field"
                  rows="3"
                  placeholder="Dudas o preguntas para la supervisi√≥n..."
                />
              </div>
            </div>
            
            <div className="form-actions">
              <button type="submit" className="btn-primary">
                <FiSave /> Guardar Observaci√≥n
              </button>
              <button 
                type="button" 
                className="btn-danger"
                onClick={() => setShowForm(false)}
              >
                Cancelar
              </button>
            </div>
          </form>
        </div>
      )}

      {/* Lista de Observaciones */}
      <div className="config-content">
        <h3>Observaciones Registradas</h3>
        
        {observaciones.length > 0 ? (
          <div className="observaciones-list">
            {observaciones.map((obs) => (
              <div key={obs.id} className="accordion">
                <div className="accordion-header">
                  <div className="flex-row align-center gap-10">
                    <FiCalendar />
                    <span>{new Date(obs.fecha).toLocaleDateString()}</span>
                  </div>
                  <div className="flex-row align-center gap-10">
                    <FiUser />
                    <span>{obs.paciente_nombre}</span>
                  </div>
                  <div className="flex-row gap-5">
                    <button className="btn-text">
                      <FiEdit2 />
                    </button>
                    <button 
                      className="btn-text text-danger"
                      onClick={() => handleDelete(obs.id)}
                    >
                      <FiTrash2 />
                    </button>
                  </div>
                </div>
                
                <div className="accordion-content">
                  <div className="grid-2 gap-20">
                    <div>
                      <h4>Observaciones</h4>
                      <p>{obs.observaciones}</p>
                    </div>
                    
                    <div>
                      <h4>Logros</h4>
                      <p>{obs.logros}</p>
                    </div>
                    
                    <div>
                      <h4>Dificultades</h4>
                      <p>{obs.dificultades}</p>
                    </div>
                    
                    <div>
                      <h4>Preguntas para supervisor</h4>
                      <p>{obs.preguntas_supervisor}</p>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        ) : (
          <div className="no-citas">
            <div className="no-citas-icon">üìù</div>
            <div>No hay observaciones registradas</div>
            <p className="text-small mt-10">
              Las observaciones son importantes para tu supervisi√≥n y desarrollo profesional.
            </p>
            <button 
              className="btn-text mt-10"
              onClick={() => setShowForm(true)}
            >
              <FiPlus /> Registrar tu primera observaci√≥n
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default BecarioObservaciones;

/src\pages\becario\PacientesPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiSearch, FiUser, FiCalendar, FiPhone, FiMail, FiFileText } from 'react-icons/fi';

const BecarioPacientes = () => {
  const [pacientes, setPacientes] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedPaciente, setSelectedPaciente] = useState(null);
  const [showDetalles, setShowDetalles] = useState(false);

  useEffect(() => {
    fetchPacientes();
  }, []);

  const fetchPacientes = async () => {
    try {
      const token = localStorage.getItem('token');
      
      // En un proyecto real, esto vendr√≠a de un endpoint espec√≠fico
      // Simulamos datos por ahora
      setTimeout(() => {
        setPacientes([
          {
            id: 1,
            nombre: 'Carlos G√≥mez',
            edad: 25,
            telefono: '555-1234',
            email: 'carlos@email.com',
            motivo_consulta: 'Ansiedad acad√©mica',
            ultima_sesion: '2024-01-10',
            proxima_cita: '2024-01-17',
            sesiones_completadas: 3,
            psicologo: 'Lic. Luis Fern√°ndez'
          },
          {
            id: 2,
            nombre: 'Mariana L√≥pez',
            edad: 28,
            telefono: '555-5678',
            email: 'mariana@email.com',
            motivo_consulta: 'Estr√©s laboral',
            ultima_sesion: '2024-01-09',
            proxima_cita: '2024-01-16',
            sesiones_completadas: 5,
            psicologo: 'Lic. Luis Fern√°ndez'
          },
          {
            id: 3,
            nombre: 'Roberto S√°nchez',
            edad: 22,
            telefono: '555-9012',
            email: 'roberto@email.com',
            motivo_consulta: 'Problemas de adaptaci√≥n',
            ultima_sesion: '2024-01-08',
            proxima_cita: '2024-01-15',
            sesiones_completadas: 2,
            psicologo: 'Lic. Luis Fern√°ndez'
          }
        ]);
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al obtener pacientes:', error);
      setLoading(false);
    }
  };

  const filteredPacientes = pacientes.filter(paciente =>
    paciente.nombre.toLowerCase().includes(searchTerm.toLowerCase()) ||
    paciente.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
    paciente.motivo_consulta.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const showPacienteDetalles = (paciente) => {
    setSelectedPaciente(paciente);
    setShowDetalles(true);
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando pacientes...</div>
      </div>
    );
  }

  return (
    <div className="pacientes-page">
      <div className="page-header">
        <div>
          <h1>Mis Pacientes</h1>
          <p>Pacientes asignados a tu supervisi√≥n</p>
        </div>
      </div>

      {/* Search */}
      <div className="search-box" style={{ marginBottom: '20px' }}>
        <FiSearch />
        <input
          type="text"
          className="search-input"
          placeholder="Buscar paciente por nombre, email o motivo de consulta..."
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
        />
      </div>

      {/* Patients Grid */}
      <div className="grid-3">
        {filteredPacientes.map((paciente) => (
          <div key={paciente.id} className="card">
            <div className="flex-row align-center gap-10 mb-10">
              <div className="avatar">
                {paciente.nombre.split(' ').map(n => n[0]).join('')}
              </div>
              <div>
                <h3>{paciente.nombre}</h3>
                <p className="text-small">{paciente.edad} a√±os</p>
              </div>
            </div>

            <div className="flex-col gap-5 mb-10">
              <div className="flex-row align-center gap-5">
                <FiPhone size={14} />
                <span>{paciente.telefono}</span>
              </div>
              <div className="flex-row align-center gap-5">
                <FiMail size={14} />
                <span>{paciente.email}</span>
              </div>
              <div className="flex-row align-center gap-5">
                <FiCalendar size={14} />
                <span>√öltima: {new Date(paciente.ultima_sesion).toLocaleDateString()}</span>
              </div>
            </div>

            <div className="mb-10">
              <p><strong>Motivo:</strong> {paciente.motivo_consulta}</p>
              <p><strong>Psic√≥logo:</strong> {paciente.psicologo}</p>
              <p><strong>Sesiones:</strong> {paciente.sesiones_completadas} completadas</p>
            </div>

            <div className="flex-row gap-10">
              <button 
                className="btn-secondary flex-1"
                onClick={() => showPacienteDetalles(paciente)}
              >
                <FiFileText /> Detalles
              </button>
            </div>
          </div>
        ))}
      </div>

      {/* Modal de Detalles */}
      {showDetalles && selectedPaciente && (
        <div className="modal-overlay">
          <div className="modal-container modal-large">
            <div className="modal-header">
              <h3>Detalles del Paciente</h3>
              <button className="modal-close" onClick={() => setShowDetalles(false)}>√ó</button>
            </div>
            
            <div className="modal-content">
              <div className="grid-2 gap-20">
                <div>
                  <h4>Informaci√≥n Personal</h4>
                  <div className="detail-row">
                    <strong>Nombre:</strong> {selectedPaciente.nombre}
                  </div>
                  <div className="detail-row">
                    <strong>Edad:</strong> {selectedPaciente.edad} a√±os
                  </div>
                  <div className="detail-row">
                    <strong>Tel√©fono:</strong> {selectedPaciente.telefono}
                  </div>
                  <div className="detail-row">
                    <strong>Email:</strong> {selectedPaciente.email}
                  </div>
                </div>
                
                <div>
                  <h4>Informaci√≥n Cl√≠nica</h4>
                  <div className="detail-row">
                    <strong>Motivo de consulta:</strong> {selectedPaciente.motivo_consulta}
                  </div>
                  <div className="detail-row">
                    <strong>Psic√≥logo asignado:</strong> {selectedPaciente.psicologo}
                  </div>
                  <div className="detail-row">
                    <strong>Sesiones completadas:</strong> {selectedPaciente.sesiones_completadas}
                  </div>
                  <div className="detail-row">
                    <strong>Pr√≥xima cita:</strong> {new Date(selectedPaciente.proxima_cita).toLocaleDateString()}
                  </div>
                </div>
              </div>
              
              <div className="mt-20">
                <h4>Historial de Citas Recientes</h4>
                <div className="table-container mt-10">
                  <table className="data-table">
                    <thead>
                      <tr>
                        <th>Fecha</th>
                        <th>Hora</th>
                        <th>Estado</th>
                        <th>Tipo</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>{new Date(selectedPaciente.ultima_sesion).toLocaleDateString()}</td>
                        <td>10:00 AM</td>
                        <td><span className="badge badge-success">Completada</span></td>
                        <td>Presencial</td>
                      </tr>
                      <tr>
                        <td>2024-01-03</td>
                        <td>11:00 AM</td>
                        <td><span className="badge badge-success">Completada</span></td>
                        <td>Virtual</td>
                      </tr>
                      <tr>
                        <td>2023-12-27</td>
                        <td>09:00 AM</td>
                        <td><span className="badge badge-success">Completada</span></td>
                        <td>Presencial</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            
            <div className="modal-footer">
              <button className="btn-secondary" onClick={() => setShowDetalles(false)}>
                Cerrar
              </button>
              <button className="btn-primary">
                Agendar Cita
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default BecarioPacientes;

/src\pages\coordinador\AgendaPage.js:
--------------------------------------------------------------------------------


/src\pages\coordinador\AltasPage.js:
--------------------------------------------------------------------------------


/src\pages\coordinador\AsignacionesPage.js:
--------------------------------------------------------------------------------


/src\pages\coordinador\ConfiguracionPage.js:
--------------------------------------------------------------------------------


/src\pages\coordinador\DashboardPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { 
  FiUsers, FiCalendar, FiTrendingUp, FiBarChart2,
  FiUserCheck, FiClock, FiAlertCircle, FiRefreshCw,
  FiDollarSign, FiActivity
} from 'react-icons/fi';

const CoordinadorDashboard = () => {
  const [estadisticas, setEstadisticas] = useState({
    becariosActivos: 0,
    psicologosActivos: 0,
    pacientesActivos: 0,
    citasHoy: 0,
    citasCompletadasHoy: 0,
    altasMesActual: 0
  });
  const [actividadReciente, setActividadReciente] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchDashboardData();
  }, []);

  const fetchDashboardData = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setEstadisticas({
          becariosActivos: 4,
          psicologosActivos: 2,
          pacientesActivos: 25,
          citasHoy: 12,
          citasCompletadasHoy: 6,
          altasMesActual: 3
        });
        
        setActividadReciente([
          { id: 1, tipo: 'nueva_cita', descripcion: 'Nueva cita agendada para Carlos G√≥mez', fecha: '2024-01-10 09:30:00', usuario: 'Juan P√©rez' },
          { id: 2, tipo: 'alta_paciente', descripcion: 'Ana Rodr√≠guez dada de alta terap√©utica', fecha: '2024-01-10 08:15:00', usuario: 'Lic. Luis Fern√°ndez' },
          { id: 3, tipo: 'nuevo_usuario', descripcion: 'Nuevo becario registrado: Pedro Hern√°ndez', fecha: '2024-01-09 16:45:00', usuario: 'Coordinador' },
          { id: 4, tipo: 'asignacion', descripcion: 'Paciente asignado a becario Sof√≠a Ram√≠rez', fecha: '2024-01-09 14:20:00', usuario: 'Coordinador' }
        ]);
        
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error cargando dashboard:', error);
      setLoading(false);
    }
  };

  const statCards = [
    {
      title: 'Becarios Activos',
      value: estadisticas.becariosActivos,
      icon: <FiUserCheck />,
      color: 'var(--grnb)',
      change: 'En formaci√≥n'
    },
    {
      title: 'Psic√≥logos Activos',
      value: estadisticas.psicologosActivos,
      icon: <FiUsers />,
      color: 'var(--blu)',
      change: 'En supervisi√≥n'
    },
    {
      title: 'Pacientes Activos',
      value: estadisticas.pacientesActivos,
      icon: <FiActivity />,
      color: 'var(--yy)',
      change: 'En tratamiento'
    },
    {
      title: 'Citas Hoy',
      value: estadisticas.citasHoy,
      icon: <FiCalendar />,
      color: 'var(--grnd)',
      change: `${estadisticas.citasCompletadasHoy} completadas`
    },
    {
      title: 'Altas Este Mes',
      value: estadisticas.altasMesActual,
      icon: <FiTrendingUp />,
      color: 'var(--grnl)',
      change: 'Pacientes finalizados'
    },
    {
      title: 'Sesiones Promedio',
      value: '8.5',
      icon: <FiBarChart2 />,
      color: 'var(--rr)',
      change: 'Por paciente/mes'
    },
    {
      title: 'Ingresos Estimados',
      value: '$24,500',
      icon: <FiDollarSign />,
      color: 'var(--grnb)',
      change: 'Este mes'
    },
    {
      title: 'Alertas Pendientes',
      value: '3',
      icon: <FiAlertCircle />,
      color: 'var(--rl)',
      change: 'Requieren atenci√≥n'
    }
  ];

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando panel de coordinaci√≥n...</div>
      </div>
    );
  }

  return (
    <div className="dashboard-page">
      <div className="page-header">
        <div>
          <h1>Panel de Coordinaci√≥n</h1>
          <p>Vista general del sistema y gesti√≥n administrativa</p>
        </div>
        <button className="btn-secondary" onClick={fetchDashboardData}>
          <FiRefreshCw /> Actualizar
        </button>
      </div>

      {/* Stats Grid */}
      <div className="stats-grid">
        {statCards.map((stat, index) => (
          <div key={index} className="stat-card">
            <div className="stat-header">
              <div className="stat-icon" style={{ color: stat.color }}>
                {stat.icon}
              </div>
              <h3>{stat.title}</h3>
            </div>
            <div className="stat-value">{stat.value}</div>
            <div className="stat-change">{stat.change}</div>
          </div>
        ))}
      </div>

      {/* Main Content Grid */}
      <div className="dashboard-content-grid">
        {/* Actividad Reciente */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Actividad Reciente del Sistema</h3>
            <button className="btn-text">Ver todo</button>
          </div>
          
          <div className="timeline">
            {actividadReciente.map((actividad) => (
              <div key={actividad.id} className="timeline-item">
                <div className="timeline-content">
                  <div className="flex-row justify-between">
                    <strong>{actividad.descripcion}</strong>
                    <span className="text-small">
                      {new Date(actividad.fecha).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                    </span>
                  </div>
                  <div className="text-small mt-5">
                    Por: {actividad.usuario} ‚Ä¢ {new Date(actividad.fecha).toLocaleDateString()}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Distribuci√≥n de Citas */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Distribuci√≥n de Citas por Psic√≥logo</h3>
          </div>
          
          <div className="activity-chart">
            <div className="chart-placeholder">
              <div className="chart-bars">
                {[
                  { nombre: 'Luis Fern√°ndez', citas: 8, color: 'var(--grnb)' },
                  { nombre: 'Laura Guti√©rrez', citas: 4, color: 'var(--blu)' }
                ].map((psicologo, index) => (
                  <div key={index} className="chart-bar" style={{ flex: psicologo.citas }}>
                    <div 
                      className="bar-fill"
                      style={{ 
                        height: `${(psicologo.citas / 12) * 100}%`,
                        background: psicologo.color
                      }}
                    ></div>
                    <div className="bar-label">{psicologo.nombre.split(' ')[1]}</div>
                    <div className="bar-value">{psicologo.citas} citas</div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>

        {/* Becarios por Carga */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Carga de Pacientes por Becario</h3>
            <button className="btn-text">Reasignar</button>
          </div>
          
          <div className="pacientes-list">
            {[
              { id: 1, nombre: 'Juan P√©rez', pacientes: 3, capacidad: 5, porcentaje: 60 },
              { id: 2, nombre: 'Sof√≠a Ram√≠rez', pacientes: 2, capacidad: 4, porcentaje: 50 },
              { id: 3, nombre: 'Pedro Hern√°ndez', pacientes: 1, capacidad: 3, porcentaje: 33 },
              { id: 4, nombre: 'Nuevo Becario', pacientes: 0, capacidad: 3, porcentaje: 0 }
            ].map((becario) => (
              <div key={becario.id} className="paciente-item">
                <div className="paciente-info">
                  <div className="paciente-nombre">{becario.nombre}</div>
                  <div className="paciente-fecha">
                    {becario.pacientes} / {becario.capacidad} pacientes
                  </div>
                </div>
                <div className="paciente-progreso">
                  <div className="progress-container">
                    <div 
                      className="progress-bar"
                      style={{ width: `${becario.porcentaje}%` }}
                    ></div>
                  </div>
                  <span className="progreso-text">{becario.porcentaje}%</span>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Quick Actions */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Acciones de Coordinaci√≥n</h3>
          </div>
          
          <div className="quick-actions">
            <button className="btn-primary w-100 mb-10">
              Gestionar Usuarios
            </button>
            <button className="btn-secondary w-100 mb-10">
              Asignar Pacientes
            </button>
            <button className="btn-warning w-100 mb-10">
              Generar Reporte Mensual
            </button>
            <button className="btn-danger w-100">
              Revisar Altas
            </button>
            <button className="btn-text w-100 mt-10">
              Ver Agenda Global
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default CoordinadorDashboard;

/src\pages\coordinador\PacientesPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiSearch, FiUserPlus, FiEdit2, FiTrash2, FiFilter, FiUser, FiCalendar, FiPhone, FiMail, FiFileText } from 'react-icons/fi';

const CoordinadorPacientes = () => {
  const [pacientes, setPacientes] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [filterEstado, setFilterEstado] = useState('');
  const [showModal, setShowModal] = useState(false);
  const [modalType, setModalType] = useState('nuevo');
  const [formData, setFormData] = useState({
    nombre: '',
    apellido: '',
    fecha_nacimiento: '',
    genero: '',
    telefono: '',
    email: '',
    direccion: '',
    es_estudiante: false,
    matricula: '',
    institucion_educativa: '',
    contacto_emergencia_nombre: '',
    contacto_emergencia_telefono: '',
    motivo_consulta: '',
    antecedentes: '',
    activo: true,
    estado: 'activo'
  });

  useEffect(() => {
    fetchPacientes();
  }, []);

  const fetchPacientes = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setPacientes([
          {
            id: 1,
            nombre: 'Carlos',
            apellido: 'G√≥mez',
            fecha_nacimiento: '1998-05-15',
            genero: 'masculino',
            telefono: '555-1234',
            email: 'carlos@gmail.com',
            es_estudiante: true,
            matricula: 'A123456',
            institucion_educativa: 'Universidad Nacional',
            motivo_consulta: 'Ansiedad acad√©mica',
            antecedentes: 'No significativos',
            activo: true,
            estado: 'activo',
            psicologo_asignado: 'Lic. Luis Fern√°ndez',
            becario_asignado: 'Juan P√©rez',
            fecha_ingreso: '2023-10-15',
            sesiones_completadas: 8
          },
          {
            id: 2,
            nombre: 'Mariana',
            apellido: 'L√≥pez',
            fecha_nacimiento: '1995-08-22',
            genero: 'femenino',
            telefono: '555-5678',
            email: 'mariana@hotmail.com',
            es_estudiante: false,
            motivo_consulta: 'Estr√©s laboral',
            antecedentes: 'Antecedentes familiares de ansiedad',
            activo: true,
            estado: 'activo',
            psicologo_asignado: 'Lic. Luis Fern√°ndez',
            becario_asignado: 'Sof√≠a Ram√≠rez',
            fecha_ingreso: '2023-09-20',
            sesiones_completadas: 12
          },
          {
            id: 3,
            nombre: 'Roberto',
            apellido: 'S√°nchez',
            fecha_nacimiento: '2000-02-10',
            genero: 'masculino',
            telefono: '555-9012',
            email: 'roberto@yahoo.com',
            es_estudiante: true,
            matricula: 'B789012',
            institucion_educativa: 'Instituto Tecnol√≥gico',
            motivo_consulta: 'Problemas de adaptaci√≥n',
            antecedentes: 'No significativos',
            activo: true,
            estado: 'activo',
            psicologo_asignado: 'Lic. Luis Fern√°ndez',
            becario_asignado: null,
            fecha_ingreso: '2023-11-05',
            sesiones_completadas: 5
          },
          {
            id: 4,
            nombre: 'Ana',
            apellido: 'Rodr√≠guez',
            fecha_nacimiento: '1988-03-30',
            genero: 'femenino',
            telefono: '555-3456',
            email: 'ana@email.com',
            motivo_consulta: 'Depresi√≥n',
            antecedentes: 'Tratamiento previo en 2020',
            activo: false,
            estado: 'alta_terapeutica',
            psicologo_asignado: 'Lic. Luis Fern√°ndez',
            becario_asignado: 'Juan P√©rez',
            fecha_ingreso: '2023-06-10',
            fecha_alta: '2024-01-05',
            sesiones_completadas: 20
          }
        ]);
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al obtener pacientes:', error);
      setLoading(false);
    }
  };

  const filteredPacientes = pacientes.filter(paciente => {
    const matchesSearch = 
      `${paciente.nombre} ${paciente.apellido}`.toLowerCase().includes(searchTerm.toLowerCase()) ||
      paciente.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
      paciente.motivo_consulta.toLowerCase().includes(searchTerm.toLowerCase());
    
    const matchesEstado = !filterEstado || paciente.estado === filterEstado;
    
    return matchesSearch && matchesEstado;
  });

  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormData({
      ...formData,
      [name]: type === 'checkbox' ? checked : value
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    
    if (modalType === 'nuevo') {
      const nuevoPaciente = {
        id: pacientes.length + 1,
        ...formData,
        fecha_ingreso: new Date().toISOString().split('T')[0],
        psicologo_asignado: 'Por asignar',
        becario_asignado: null,
        sesiones_completadas: 0
      };
      setPacientes([...pacientes, nuevoPaciente]);
      alert('Paciente creado exitosamente');
    } else {
      // Editar paciente
      setPacientes(pacientes.map(p => 
        p.id === formData.id ? { ...p, ...formData } : p
      ));
      alert('Paciente actualizado exitosamente');
    }
    
    setShowModal(false);
    resetForm();
  };

  const editarPaciente = (paciente) => {
    setFormData(paciente);
    setModalType('editar');
    setShowModal(true);
  };

  const getEstadoLabel = (estado) => {
    switch (estado) {
      case 'activo':
        return { text: 'Activo', color: 'success' };
      case 'alta_terapeutica':
        return { text: 'Alta Terap√©utica', color: 'primary' };
      case 'abandono':
        return { text: 'Abandono', color: 'danger' };
      case 'traslado':
        return { text: 'Traslado', color: 'warning' };
      default:
        return { text: estado, color: 'info' };
    }
  };

  const calcularEdad = (fechaNacimiento) => {
    if (!fechaNacimiento) return 'N/A';
    const hoy = new Date();
    const nacimiento = new Date(fechaNacimiento);
    let edad = hoy.getFullYear() - nacimiento.getFullYear();
    const mes = hoy.getMonth() - nacimiento.getMonth();
    if (mes < 0 || (mes === 0 && hoy.getDate() < nacimiento.getDate())) {
      edad--;
    }
    return edad;
  };

  const resetForm = () => {
    setFormData({
      nombre: '',
      apellido: '',
      fecha_nacimiento: '',
      genero: '',
      telefono: '',
      email: '',
      direccion: '',
      es_estudiante: false,
      matricula: '',
      institucion_educativa: '',
      contacto_emergencia_nombre: '',
      contacto_emergencia_telefono: '',
      motivo_consulta: '',
      antecedentes: '',
      activo: true,
      estado: 'activo'
    });
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando pacientes...</div>
      </div>
    );
  }

  return (
    <div className="configuracion-page">
      <div className="page-header">
        <div>
          <h1>Gesti√≥n de Pacientes</h1>
          <p>Administraci√≥n de pacientes del sistema</p>
        </div>
        <button 
          className="btn-primary"
          onClick={() => {
            resetForm();
            setModalType('nuevo');
            setShowModal(true);
          }}
        >
          <FiUserPlus /> Nuevo Paciente
        </button>
      </div>

      {/* Filtros y B√∫squeda */}
      <div className="filters-container mb-20">
        <div className="search-box">
          <FiSearch />
          <input
            type="text"
            className="search-input"
            placeholder="Buscar paciente por nombre, email o motivo de consulta..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
          />
        </div>
        
        <div className="filter-buttons">
          <select 
            value={filterEstado} 
            onChange={(e) => setFilterEstado(e.target.value)}
            className="select-field"
            style={{ width: '200px' }}
          >
            <option value="">Todos los estados</option>
            <option value="activo">Activos</option>
            <option value="alta_terapeutica">Altas Terap√©uticas</option>
            <option value="abandono">Abandonos</option>
            <option value="traslado">Traslados</option>
          </select>
        </div>
      </div>

      {/* Tabla de Pacientes */}
      <div className="table-container">
        <table className="data-table">
          <thead>
            <tr>
              <th>Paciente</th>
              <th>Contacto</th>
              <th>Edad</th>
              <th>Motivo</th>
              <th>Asignaciones</th>
              <th>Sesiones</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {filteredPacientes.map((paciente) => {
              const estadoInfo = getEstadoLabel(paciente.estado);
              const edad = calcularEdad(paciente.fecha_nacimiento);
              
              return (
                <tr key={paciente.id}>
                  <td>
                    <div className="flex-row align-center gap-10">
                      <div className="avatar">
                        {paciente.nombre[0]}{paciente.apellido[0]}
                      </div>
                      <div>
                        <div className="font-bold">{paciente.nombre} {paciente.apellido}</div>
                        <div className="text-small">
                          {paciente.es_estudiante ? 'Estudiante' : 'No estudiante'}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div>{paciente.email}</div>
                    <div className="text-small">{paciente.telefono}</div>
                  </td>
                  <td>{edad} a√±os</td>
                  <td>
                    <div className="diagnostico-tag">
                      {paciente.motivo_consulta}
                    </div>
                  </td>
                  <td>
                    <div className="text-small">{paciente.psicologo_asignado}</div>
                    <div className="text-small">
                      {paciente.becario_asignado || 'Sin becario'}
                    </div>
                  </td>
                  <td>
                    <div className="font-bold">{paciente.sesiones_completadas}</div>
                    <div className="text-small">sesiones</div>
                  </td>
                  <td>
                    <span className={`badge badge-${estadoInfo.color}`}>
                      {estadoInfo.text}
                    </span>
                  </td>
                  <td>
                    <div className="flex-row gap-5">
                      <button 
                        className="btn-text"
                        onClick={() => editarPaciente(paciente)}
                        title="Editar"
                      >
                        <FiEdit2 />
                      </button>
                      <button 
                        className="btn-text"
                        title="Ver expediente"
                      >
                        <FiFileText />
                      </button>
                    </div>
                  </td>
                </tr>
              );
            })}
          </tbody>
        </table>
      </div>

      {/* Resumen */}
      <div className="grid-3 mt-20">
        <div className="card">
          <h4>Resumen de Pacientes</h4>
          <div className="mt-10">
            <p>Total: {pacientes.length}</p>
            <p>Activos: {pacientes.filter(p => p.activo).length}</p>
            <p>Estudiantes: {pacientes.filter(p => p.es_estudiante).length}</p>
            <p>Con becario: {pacientes.filter(p => p.becario_asignado).length}</p>
          </div>
        </div>
        
        <div className="card">
          <h4>Estad√≠sticas</h4>
          <div className="mt-10">
            <p>Sesiones totales: {pacientes.reduce((sum, p) => sum + p.sesiones_completadas, 0)}</p>
            <p>Promedio por paciente: {
              Math.round(pacientes.reduce((sum, p) => sum + p.sesiones_completadas, 0) / pacientes.length)
            }</p>
            <p>Altas este mes: {pacientes.filter(p => p.estado === 'alta_terapeutica').length}</p>
          </div>
        </div>
        
        <div className="card">
          <h4>Acciones</h4>
          <div className="mt-10 flex-col gap-10">
            <button className="btn-primary w-100">
              Asignar Pacientes
            </button>
            <button className="btn-secondary w-100">
              Exportar Listado
            </button>
            <button className="btn-warning w-100">
              Revisar Altas
            </button>
          </div>
        </div>
      </div>

      {/* Modal de Paciente */}
      {showModal && (
        <div className="modal-overlay">
          <div className="modal-container modal-large">
            <div className="modal-header">
              <h3>{modalType === 'nuevo' ? 'Nuevo Paciente' : 'Editar Paciente'}</h3>
              <button className="modal-close" onClick={() => setShowModal(false)}>√ó</button>
            </div>
            
            <form onSubmit={handleSubmit}>
              <div className="form-grid">
                <div className="form-group">
                  <label>Nombre</label>
                  <input
                    type="text"
                    name="nombre"
                    value={formData.nombre}
                    onChange={handleInputChange}
                    className="input-field"
                    required
                  />
                </div>
                
                <div className="form-group">
                  <label>Apellido</label>
                  <input
                    type="text"
                    name="apellido"
                    value={formData.apellido}
                    onChange={handleInputChange}
                    className="input-field"
                    required
                  />
                </div>
                
                <div className="form-group">
                  <label>Fecha de nacimiento</label>
                  <input
                    type="date"
                    name="fecha_nacimiento"
                    value={formData.fecha_nacimiento}
                    onChange={handleInputChange}
                    className="input-field"
                  />
                </div>
                
                <div className="form-group">
                  <label>G√©nero</label>
                  <select
                    name="genero"
                    value={formData.genero}
                    onChange={handleInputChange}
                    className="select-field"
                  >
                    <option value="">Seleccionar...</option>
                    <option value="masculino">Masculino</option>
                    <option value="femenino">Femenino</option>
                    <option value="otro">Otro</option>
                    <option value="prefiero_no_decir">Prefiero no decir</option>
                  </select>
                </div>
                
                <div className="form-group">
                  <label>Tel√©fono</label>
                  <input
                    type="tel"
                    name="telefono"
                    value={formData.telefono}
                    onChange={handleInputChange}
                    className="input-field"
                  />
                </div>
                
                <div className="form-group">
                  <label>Email</label>
                  <input
                    type="email"
                    name="email"
                    value={formData.email}
                    onChange={handleInputChange}
                    className="input-field"
                  />
                </div>
                
                <div className="form-group" style={{ gridColumn: 'span 2' }}>
                  <label>Direcci√≥n</label>
                  <input
                    type="text"
                    name="direccion"
                    value={formData.direccion}
                    onChange={handleInputChange}
                    className="input-field"
                  />
                </div>
                
                <div className="form-group">
                  <label className="flex-row align-center gap-10">
                    <input
                      type="checkbox"
                      name="es_estudiante"
                      checked={formData.es_estudiante}
                      onChange={handleInputChange}
                    />
                    <span>Es estudiante</span>
                  </label>
                </div>
                
                {formData.es_estudiante && (
                  <>
                    <div className="form-group">
                      <label>Matr√≠cula</label>
                      <input
                        type="text"
                        name="matricula"
                        value={formData.matricula}
                        onChange={handleInputChange}
                        className="input-field"
                      />
                    </div>
                    
                    <div className="form-group">
                      <label>Instituci√≥n educativa</label>
                      <input
                        type="text"
                        name="institucion_educativa"
                        value={formData.institucion_educativa}
                        onChange={handleInputChange}
                        className="input-field"
                      />
                    </div>
                  </>
                )}
                
                <div className="form-group">
                  <label>Contacto de emergencia</label>
                  <input
                    type="text"
                    name="contacto_emergencia_nombre"
                    value={formData.contacto_emergencia_nombre}
                    onChange={handleInputChange}
                    className="input-field"
                    placeholder="Nombre"
                  />
                </div>
                
                <div className="form-group">
                  <label>Tel√©fono emergencia</label>
                  <input
                    type="tel"
                    name="contacto_emergencia_telefono"
                    value={formData.contacto_emergencia_telefono}
                    onChange={handleInputChange}
                    className="input-field"
                    placeholder="Tel√©fono"
                  />
                </div>
                
                <div className="form-group" style={{ gridColumn: 'span 2' }}>
                  <label>Motivo de consulta</label>
                  <textarea
                    name="motivo_consulta"
                    value={formData.motivo_consulta}
                    onChange={handleInputChange}
                    className="textarea-field"
                    rows="3"
                    required
                  />
                </div>
                
                <div className="form-group" style={{ gridColumn: 'span 2' }}>
                  <label>Antecedentes</label>
                  <textarea
                    name="antecedentes"
                    value={formData.antecedentes}
                    onChange={handleInputChange}
                    className="textarea-field"
                    rows="3"
                  />
                </div>
                
                <div className="form-group">
                  <label>Estado</label>
                  <select
                    name="estado"
                    value={formData.estado}
                    onChange={handleInputChange}
                    className="select-field"
                  >
                    <option value="activo">Activo</option>
                    <option value="alta_terapeutica">Alta Terap√©utica</option>
                    <option value="abandono">Abandono</option>
                    <option value="traslado">Traslado</option>
                  </select>
                </div>
                
                <div className="form-group">
                  <label className="flex-row align-center gap-10">
                    <input
                      type="checkbox"
                      name="activo"
                      checked={formData.activo}
                      onChange={handleInputChange}
                    />
                    <span>Paciente activo</span>
                  </label>
                </div>
              </div>
              
              <div className="modal-footer">
                <button type="submit" className="btn-primary">
                  {modalType === 'nuevo' ? 'Crear Paciente' : 'Guardar Cambios'}
                </button>
                <button 
                  type="button" 
                  className="btn-danger"
                  onClick={() => setShowModal(false)}
                >
                  Cancelar
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  );
};

export default CoordinadorPacientes;

/src\pages\coordinador\ReportesPage.js:
--------------------------------------------------------------------------------


/src\pages\coordinador\UsuariosPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiSearch, FiUserPlus, FiEdit2, FiTrash2, FiFilter, FiUser, FiMail, FiPhone, FiCheckCircle, FiXCircle } from 'react-icons/fi';

const CoordinadorUsuarios = () => {
  const [usuarios, setUsuarios] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [filterRol, setFilterRol] = useState('');
  const [showModal, setShowModal] = useState(false);
  const [modalType, setModalType] = useState('nuevo');
  const [formData, setFormData] = useState({
    nombre: '',
    apellido: '',
    email: '',
    telefono: '',
    rol: 'becario',
    especialidad: '',
    fundacion_id: '',
    activo: true
  });

  useEffect(() => {
    fetchUsuarios();
  }, []);

  const fetchUsuarios = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setUsuarios([
          {
            id: 1,
            nombre: 'Ana',
            apellido: 'Mart√≠nez',
            email: 'coordinador@psicogestion.com',
            telefono: '555-1111',
            rol: 'coordinador',
            especialidad: 'Coordinaci√≥n Cl√≠nica',
            activo: true,
            fecha_registro: '2023-01-15'
          },
          {
            id: 2,
            nombre: 'Luis',
            apellido: 'Fern√°ndez',
            email: 'psicologo1@psicogestion.com',
            telefono: '555-2222',
            rol: 'psicologo',
            especialidad: 'Terapia Cognitivo-Conductual',
            activo: true,
            fecha_registro: '2023-02-20'
          },
          {
            id: 3,
            nombre: 'Laura',
            apellido: 'Guti√©rrez',
            email: 'psicologo2@psicogestion.com',
            telefono: '555-5555',
            rol: 'psicologo',
            especialidad: 'Terapia Familiar',
            activo: true,
            fecha_registro: '2023-03-10'
          },
          {
            id: 4,
            nombre: 'Juan',
            apellido: 'P√©rez',
            email: 'becario1@psicogestion.com',
            telefono: '555-3333',
            rol: 'becario',
            especialidad: 'Practicante de Psicolog√≠a',
            activo: true,
            fecha_registro: '2023-09-01'
          },
          {
            id: 5,
            nombre: 'Sof√≠a',
            apellido: 'Ram√≠rez',
            email: 'becario2@psicogestion.com',
            telefono: '555-4444',
            rol: 'becario',
            especialidad: 'Practicante de Psicolog√≠a',
            activo: false,
            fecha_registro: '2023-10-15'
          }
        ]);
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al obtener usuarios:', error);
      setLoading(false);
    }
  };

  const filteredUsuarios = usuarios.filter(usuario => {
    const matchesSearch = 
      `${usuario.nombre} ${usuario.apellido}`.toLowerCase().includes(searchTerm.toLowerCase()) ||
      usuario.email.toLowerCase().includes(searchTerm.toLowerCase());
    
    const matchesRol = !filterRol || usuario.rol === filterRol;
    
    return matchesSearch && matchesRol;
  });

  const handleInputChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormData({
      ...formData,
      [name]: type === 'checkbox' ? checked : value
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    
    if (modalType === 'nuevo') {
      const nuevoUsuario = {
        id: usuarios.length + 1,
        ...formData,
        fecha_registro: new Date().toISOString().split('T')[0]
      };
      setUsuarios([...usuarios, nuevoUsuario]);
      alert('Usuario creado exitosamente');
    } else {
      // Editar usuario
      setUsuarios(usuarios.map(u => 
        u.id === formData.id ? { ...u, ...formData } : u
      ));
      alert('Usuario actualizado exitosamente');
    }
    
    setShowModal(false);
    resetForm();
  };

  const editarUsuario = (usuario) => {
    setFormData(usuario);
    setModalType('editar');
    setShowModal(true);
  };

  const toggleEstadoUsuario = (id) => {
    setUsuarios(usuarios.map(u => 
      u.id === id ? { ...u, activo: !u.activo } : u
    ));
  };

  const resetForm = () => {
    setFormData({
      nombre: '',
      apellido: '',
      email: '',
      telefono: '',
      rol: 'becario',
      especialidad: '',
      fundacion_id: '',
      activo: true
    });
  };

  const getRolLabel = (rol) => {
    switch (rol) {
      case 'coordinador':
        return { text: 'Coordinador', color: 'danger' };
      case 'psicologo':
        return { text: 'Psic√≥logo', color: 'primary' };
      case 'becario':
        return { text: 'Becario', color: 'warning' };
      default:
        return { text: rol, color: 'info' };
    }
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando usuarios...</div>
      </div>
    );
  }

  return (
    <div className="configuracion-page">
      <div className="page-header">
        <div>
          <h1>Gesti√≥n de Usuarios</h1>
          <p>Administraci√≥n de coordinadores, psic√≥logos y becarios</p>
        </div>
        <button 
          className="btn-primary"
          onClick={() => {
            resetForm();
            setModalType('nuevo');
            setShowModal(true);
          }}
        >
          <FiUserPlus /> Nuevo Usuario
        </button>
      </div>

      {/* Filtros y B√∫squeda */}
      <div className="filters-container mb-20">
        <div className="search-box">
          <FiSearch />
          <input
            type="text"
            className="search-input"
            placeholder="Buscar usuario por nombre o email..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
          />
        </div>
        
        <div className="filter-buttons">
          <select 
            value={filterRol} 
            onChange={(e) => setFilterRol(e.target.value)}
            className="select-field"
            style={{ width: '200px' }}
          >
            <option value="">Todos los roles</option>
            <option value="coordinador">Coordinadores</option>
            <option value="psicologo">Psic√≥logos</option>
            <option value="becario">Becarios</option>
          </select>
        </div>
      </div>

      {/* Tabla de Usuarios */}
      <div className="table-container">
        <table className="data-table">
          <thead>
            <tr>
              <th>Usuario</th>
              <th>Contacto</th>
              <th>Rol</th>
              <th>Especialidad</th>
              <th>Fecha Registro</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {filteredUsuarios.map((usuario) => {
              const rolInfo = getRolLabel(usuario.rol);
              
              return (
                <tr key={usuario.id}>
                  <td>
                    <div className="flex-row align-center gap-10">
                      <div className="avatar">
                        {usuario.nombre[0]}{usuario.apellido[0]}
                      </div>
                      <div>
                        <div className="font-bold">{usuario.nombre} {usuario.apellido}</div>
                        <div className="text-small">ID: {usuario.id}</div>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div>{usuario.email}</div>
                    <div className="text-small">{usuario.telefono}</div>
                  </td>
                  <td>
                    <span className={`badge badge-${rolInfo.color}`}>
                      {rolInfo.text}
                    </span>
                  </td>
                  <td>{usuario.especialidad}</td>
                  <td>
                    {new Date(usuario.fecha_registro).toLocaleDateString()}
                  </td>
                  <td>
                    {usuario.activo ? (
                      <span className="badge badge-success">Activo</span>
                    ) : (
                      <span className="badge badge-danger">Inactivo</span>
                    )}
                  </td>
                  <td>
                    <div className="flex-row gap-5">
                      <button 
                        className="btn-text"
                        onClick={() => editarUsuario(usuario)}
                        title="Editar"
                      >
                        <FiEdit2 />
                      </button>
                      <button 
                        className={`btn-text ${usuario.activo ? 'text-danger' : 'text-success'}`}
                        onClick={() => toggleEstadoUsuario(usuario.id)}
                        title={usuario.activo ? 'Desactivar' : 'Activar'}
                      >
                        {usuario.activo ? <FiXCircle /> : <FiCheckCircle />}
                      </button>
                    </div>
                  </td>
                </tr>
              );
            })}
          </tbody>
        </table>
      </div>

      {/* Resumen */}
      <div className="grid-3 mt-20">
        <div className="card">
          <h4>Resumen de Usuarios</h4>
          <div className="mt-10">
            <p>Total: {usuarios.length}</p>
            <p>Activos: {usuarios.filter(u => u.activo).length}</p>
            <p>Becarios: {usuarios.filter(u => u.rol === 'becario').length}</p>
            <p>Psic√≥logos: {usuarios.filter(u => u.rol === 'psicologo').length}</p>
          </div>
        </div>
        
        <div className="card">
          <h4>Distribuci√≥n por Rol</h4>
          <div className="mt-10">
            {Object.entries(
              usuarios.reduce((acc, user) => {
                acc[user.rol] = (acc[user.rol] || 0) + 1;
                return acc;
              }, {})
            ).map(([rol, count]) => (
              <div key={rol} className="flex-row justify-between mb-5">
                <span>{getRolLabel(rol).text}:</span>
                <span className="font-bold">{count}</span>
              </div>
            ))}
          </div>
        </div>
        
        <div className="card">
          <h4>Acciones</h4>
          <div className="mt-10 flex-col gap-10">
            <button className="btn-primary w-100">
              Exportar Listado
            </button>
            <button className="btn-secondary w-100">
              Enviar Recordatorios
            </button>
          </div>
        </div>
      </div>

      {/* Modal de Usuario */}
      {showModal && (
        <div className="modal-overlay">
          <div className="modal-container">
            <div className="modal-header">
              <h3>{modalType === 'nuevo' ? 'Nuevo Usuario' : 'Editar Usuario'}</h3>
              <button className="modal-close" onClick={() => setShowModal(false)}>√ó</button>
            </div>
            
            <form onSubmit={handleSubmit}>
              <div className="form-grid">
                <div className="form-group">
                  <label>Nombre</label>
                  <input
                    type="text"
                    name="nombre"
                    value={formData.nombre}
                    onChange={handleInputChange}
                    className="input-field"
                    required
                  />
                </div>
                
                <div className="form-group">
                  <label>Apellido</label>
                  <input
                    type="text"
                    name="apellido"
                    value={formData.apellido}
                    onChange={handleInputChange}
                    className="input-field"
                    required
                  />
                </div>
                
                <div className="form-group">
                  <label>Email</label>
                  <input
                    type="email"
                    name="email"
                    value={formData.email}
                    onChange={handleInputChange}
                    className="input-field"
                    required
                  />
                </div>
                
                <div className="form-group">
                  <label>Tel√©fono</label>
                  <input
                    type="tel"
                    name="telefono"
                    value={formData.telefono}
                    onChange={handleInputChange}
                    className="input-field"
                  />
                </div>
                
                <div className="form-group">
                  <label>Rol</label>
                  <select
                    name="rol"
                    value={formData.rol}
                    onChange={handleInputChange}
                    className="select-field"
                    required
                  >
                    <option value="becario">Becario</option>
                    <option value="psicologo">Psic√≥logo</option>
                    <option value="coordinador">Coordinador</option>
                  </select>
                </div>
                
                <div className="form-group">
                  <label>Especialidad</label>
                  <input
                    type="text"
                    name="especialidad"
                    value={formData.especialidad}
                    onChange={handleInputChange}
                    className="input-field"
                    placeholder="Ej: Terapia Cognitivo-Conductual"
                  />
                </div>
                
                {formData.rol === 'psicologo' && (
                  <div className="form-group" style={{ gridColumn: 'span 2' }}>
                    <label>Contrase√±a Temporal</label>
                    <input
                      type="text"
                      value="P@ssw0rd123"
                      className="input-field"
                      readOnly
                    />
                    <p className="text-small mt-5">El usuario deber√° cambiar la contrase√±a en su primer inicio</p>
                  </div>
                )}
                
                <div className="form-group">
                  <label className="flex-row align-center gap-10">
                    <input
                      type="checkbox"
                      name="activo"
                      checked={formData.activo}
                      onChange={handleInputChange}
                    />
                    <span>Usuario activo</span>
                  </label>
                </div>
              </div>
              
              <div className="modal-footer">
                <button type="submit" className="btn-primary">
                  {modalType === 'nuevo' ? 'Crear Usuario' : 'Guardar Cambios'}
                </button>
                <button 
                  type="button" 
                  className="btn-danger"
                  onClick={() => setShowModal(false)}
                >
                  Cancelar
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  );
};

export default CoordinadorUsuarios;

/src\pages\psicologo\CitasPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { 
  FiCalendar, FiClock, FiUser, FiFilter, 
  FiChevronLeft, FiChevronRight, FiRefreshCw,
  FiCheckCircle, FiXCircle, FiEdit2
} from 'react-icons/fi';
import { format, addDays, subDays } from 'date-fns';
import { es } from 'date-fns/locale';

const PsicologoCitas = () => {
  const [citas, setCitas] = useState([]);
  const [selectedDate, setSelectedDate] = useState(new Date());
  const [loading, setLoading] = useState(true);
  const [filterBecario, setFilterBecario] = useState('');
  const [filterEstado, setFilterEstado] = useState('');
  const [becarios, setBecarios] = useState([]);

  useEffect(() => {
    fetchData();
  }, [selectedDate]);

  const fetchData = async () => {
    try {
      setLoading(true);
      
      // Simulaci√≥n de datos
      setTimeout(() => {
        setCitas([
          {
            id: 1,
            paciente_nombre: 'Carlos G√≥mez',
            fecha: format(new Date(), 'yyyy-MM-dd'),
            hora: '10:00',
            tipo_consulta: 'presencial',
            estado: 'confirmada',
            duracion: 50,
            becario_nombre: 'Juan P√©rez',
            notas: 'Segunda sesi√≥n de exposici√≥n gradual'
          },
          {
            id: 2,
            paciente_nombre: 'Mariana L√≥pez',
            fecha: format(new Date(), 'yyyy-MM-dd'),
            hora: '11:30',
            tipo_consulta: 'virtual',
            estado: 'programada',
            duracion: 45,
            becario_nombre: 'Sof√≠a Ram√≠rez',
            notas: 'Seguimiento de tareas asignadas'
          },
          {
            id: 3,
            paciente_nombre: 'Roberto S√°nchez',
            fecha: format(new Date(), 'yyyy-MM-dd'),
            hora: '14:00',
            tipo_consulta: 'presencial',
            estado: 'completada',
            duracion: 60,
            becario_nombre: null,
            notas: 'Evaluaci√≥n de progreso'
          }
        ]);
        
        setBecarios([
          { id: 1, nombre: 'Juan P√©rez', apellido: 'P√©rez' },
          { id: 2, nombre: 'Sof√≠a', apellido: 'Ram√≠rez' }
        ]);
        
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al cargar citas:', error);
      setLoading(false);
    }
  };

  const filteredCitas = citas.filter(cita => {
    const matchesBecario = !filterBecario || cita.becario_nombre?.includes(filterBecario);
    const matchesEstado = !filterEstado || cita.estado === filterEstado;
    return matchesBecario && matchesEstado;
  });

  const goToPreviousDay = () => {
    setSelectedDate(prev => subDays(prev, 1));
  };

  const goToNextDay = () => {
    setSelectedDate(prev => addDays(prev, 1));
  };

  const goToToday = () => {
    setSelectedDate(new Date());
  };

  const formatDateSpanish = (date) => {
    return format(date, "EEEE d 'de' MMMM, yyyy", { locale: es });
  };

  const handleEstadoCita = (citaId, nuevoEstado) => {
    setCitas(prev => 
      prev.map(cita => 
        cita.id === citaId ? { ...cita, estado: nuevoEstado } : cita
      )
    );
    alert(`Cita ${nuevoEstado === 'completada' ? 'marcada como completada' : 'cancelada'}`);
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando citas...</div>
      </div>
    );
  }

  return (
    <div className="citas-page">
      <div className="page-header">
        <div>
          <h1>Mis Citas</h1>
          <p>Agenda de sesiones y supervisiones</p>
        </div>
        <button className="btn-secondary" onClick={fetchData}>
          <FiRefreshCw /> Actualizar
        </button>
      </div>

      <div className="calendar-controls">
        <div className="date-navigation">
          <button className="btn-text" onClick={goToPreviousDay}>
            <FiChevronLeft /> Ayer
          </button>
          
          <div className="current-date">
            <h3>{formatDateSpanish(selectedDate)}</h3>
          </div>
          
          <button className="btn-text" onClick={goToNextDay}>
            Ma√±ana <FiChevronRight />
          </button>
        </div>

        <div className="quick-actions">
          <button className="btn-secondary" onClick={goToToday}>
            Hoy
          </button>
        </div>
      </div>

      {/* Filtros */}
      <div className="filters-container mb-20">
        <div className="grid-2 gap-20">
          <div className="form-group">
            <label>Filtrar por becario</label>
            <select 
              value={filterBecario} 
              onChange={(e) => setFilterBecario(e.target.value)}
              className="select-field"
            >
              <option value="">Todos los becarios</option>
              {becarios.map(becario => (
                <option key={becario.id} value={becario.nombre}>
                  {becario.nombre} {becario.apellido}
                </option>
              ))}
              <option value="sin_becario">Sin becario</option>
            </select>
          </div>
          
          <div className="form-group">
            <label>Filtrar por estado</label>
            <select 
              value={filterEstado} 
              onChange={(e) => setFilterEstado(e.target.value)}
              className="select-field"
            >
              <option value="">Todos los estados</option>
              <option value="programada">Programadas</option>
              <option value="confirmada">Confirmadas</option>
              <option value="completada">Completadas</option>
              <option value="cancelada">Canceladas</option>
            </select>
          </div>
        </div>
      </div>

      {/* Vista de Calendario */}
      <div className="calendar-day-view mb-20">
        <div className="time-column">
          {[9, 10, 11, 12, 13, 14, 15, 16, 17, 18].map(hour => (
            <div key={hour} className="time-slot">
              <span className="time-label">{hour}:00</span>
            </div>
          ))}
        </div>

        <div className="events-column">
          {[9, 10, 11, 12, 13, 14, 15, 16, 17, 18].map(hour => {
            const hourCitas = filteredCitas.filter(cita => 
              parseInt(cita.hora.split(':')[0]) === hour
            );

            return (
              <div key={hour} className="hour-slot">
                {hourCitas.map((cita) => (
                  <div 
                    key={cita.id}
                    className={`event-item ${
                      cita.estado === 'confirmada' ? 'event-confirmed' :
                      cita.estado === 'completada' ? 'event-completed' :
                      cita.estado === 'programada' ? 'event-pending' :
                      'event-cancelled'
                    }`}
                  >
                    <div className="event-header">
                      <div className="event-time">
                        <FiClock /> {cita.hora}
                      </div>
                      <div className="event-type">{cita.tipo_consulta}</div>
                    </div>
                    <div className="event-content">
                      <div className="event-patient">
                        <FiUser /> {cita.paciente_nombre}
                      </div>
                      {cita.becario_nombre && (
                        <div className="event-becario">üë®‚Äçüéì {cita.becario_nombre}</div>
                      )}
                      {cita.notas && (
                        <div className="event-notes">{cita.notas}</div>
                      )}
                    </div>
                    <div className="event-footer">
                      <span className={`badge ${
                        cita.estado === 'confirmada' ? 'badge-success' :
                        cita.estado === 'completada' ? 'badge-primary' :
                        cita.estado === 'programada' ? 'badge-warning' :
                        'badge-danger'
                      }`}>
                        {cita.estado}
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            );
          })}
        </div>
      </div>

      {/* Lista de Citas */}
      <div className="day-citas-list">
        <h3>Citas para {formatDateSpanish(selectedDate)} ({filteredCitas.length})</h3>
        
        {filteredCitas.length > 0 ? (
          <div className="citas-cards">
            {filteredCitas.map((cita) => (
              <div key={cita.id} className="cita-card">
                <div className="cita-card-header">
                  <div className="cita-time">
                    <FiClock /> {cita.hora} ({cita.duracion} min)
                  </div>
                  <div className={`cita-status badge ${
                    cita.estado === 'confirmada' ? 'badge-success' :
                    cita.estado === 'completada' ? 'badge-primary' :
                    cita.estado === 'programada' ? 'badge-warning' :
                    'badge-danger'
                  }`}>
                    {cita.estado}
                  </div>
                </div>
                
                <div className="cita-card-body">
                  <div className="cita-paciente">
                    <FiUser /> {cita.paciente_nombre}
                  </div>
                  
                  <div className="cita-info">
                    <div className="cita-tipo">
                      {cita.tipo_consulta === 'presencial' ? 'üìã Presencial' : 'üíª Virtual'}
                    </div>
                    
                    {cita.becario_nombre && (
                      <div className="cita-becario">
                        üë®‚Äçüéì {cita.becario_nombre}
                      </div>
                    )}
                    
                    {cita.notas && (
                      <div className="cita-notas">
                        <strong>Notas:</strong> {cita.notas}
                      </div>
                    )}
                  </div>
                </div>
                
                <div className="cita-card-footer">
                  <button className="btn-text">
                    <FiEdit2 /> Editar
                  </button>
                  
                  {cita.estado === 'confirmada' && (
                    <button 
                      className="btn-text text-success"
                      onClick={() => handleEstadoCita(cita.id, 'completada')}
                    >
                      <FiCheckCircle /> Completar
                    </button>
                  )}
                  
                  {(cita.estado === 'programada' || cita.estado === 'confirmada') && (
                    <button 
                      className="btn-text text-danger"
                      onClick={() => handleEstadoCita(cita.id, 'cancelada')}
                    >
                      <FiXCircle /> Cancelar
                    </button>
                  )}
                </div>
              </div>
            ))}
          </div>
        ) : (
          <div className="no-citas">
            <div className="no-citas-icon">üìÖ</div>
            <div>No hay citas programadas para este d√≠a</div>
            <p className="text-small mt-10">Prueba con otros filtros o selecciona otra fecha</p>
          </div>
        )}
      </div>

      {/* Estad√≠sticas del D√≠a */}
      <div className="grid-3 mt-20">
        <div className="card">
          <h4>Resumen del D√≠a</h4>
          <div className="mt-10">
            <p>Total: {citas.length}</p>
            <p>Confirmadas: {citas.filter(c => c.estado === 'confirmada').length}</p>
            <p>Con becario: {citas.filter(c => c.becario_nombre).length}</p>
          </div>
        </div>
        
        <div className="card">
          <h4>Tipos de Consulta</h4>
          <div className="mt-10">
            <p>Presencial: {citas.filter(c => c.tipo_consulta === 'presencial').length}</p>
            <p>Virtual: {citas.filter(c => c.tipo_consulta === 'virtual').length}</p>
          </div>
        </div>
        
        <div className="card">
          <h4>Acciones</h4>
          <div className="mt-10 flex-col gap-10">
            <button className="btn-primary w-100">
              Agendar Cita
            </button>
            <button className="btn-secondary w-100">
              Ver Agenda Semanal
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default PsicologoCitas;

/src\pages\psicologo\DashboardPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { 
  FiUsers, FiCalendar, FiTrendingUp, FiBarChart2,
  FiUserCheck, FiClock, FiRefreshCw
} from 'react-icons/fi';

const PsicologoDashboard = () => {
  const [estadisticas, setEstadisticas] = useState({
    pacientesActivos: 0,
    citasHoy: 0,
    citasSemana: 0,
    becariosAsignados: 0,
    sesionesMes: 0,
    altasMes: 0
  });
  const [citasHoy, setCitasHoy] = useState([]);
  const [becarios, setBecarios] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchDashboardData();
  }, []);

  const fetchDashboardData = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setEstadisticas({
          pacientesActivos: 12,
          citasHoy: 4,
          citasSemana: 15,
          becariosAsignados: 2,
          sesionesMes: 48,
          altasMes: 2
        });
        
        setCitasHoy([
          { id: 1, paciente: 'Carlos G√≥mez', hora: '10:00 AM', tipo: 'presencial' },
          { id: 2, paciente: 'Mariana L√≥pez', hora: '11:30 AM', tipo: 'virtual' },
          { id: 3, paciente: 'Roberto S√°nchez', hora: '02:00 PM', tipo: 'presencial' },
          { id: 4, paciente: 'Ana Rodr√≠guez', hora: '04:30 PM', tipo: 'virtual' }
        ]);
        
        setBecarios([
          { id: 1, nombre: 'Juan P√©rez', pacientes: 3, observaciones: 5 },
          { id: 2, nombre: 'Sof√≠a Ram√≠rez', pacientes: 2, observaciones: 3 }
        ]);
        
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error cargando dashboard:', error);
      setLoading(false);
    }
  };

  const statCards = [
    {
      title: 'Pacientes Activos',
      value: estadisticas.pacientesActivos,
      icon: <FiUsers />,
      color: 'var(--grnb)',
      change: 'En tratamiento'
    },
    {
      title: 'Citas Hoy',
      value: estadisticas.citasHoy,
      icon: <FiCalendar />,
      color: 'var(--blu)',
      change: 'Programadas'
    },
    {
      title: 'Citas Esta Semana',
      value: estadisticas.citasSemana,
      icon: <FiClock />,
      color: 'var(--yy)',
      change: 'Pr√≥ximos 7 d√≠as'
    },
    {
      title: 'Becarios Asignados',
      value: estadisticas.becariosAsignados,
      icon: <FiUserCheck />,
      color: 'var(--grnd)',
      change: 'En supervisi√≥n'
    },
    {
      title: 'Sesiones Mes',
      value: estadisticas.sesionesMes,
      icon: <FiTrendingUp />,
      color: 'var(--grnl)',
      change: 'Realizadas'
    },
    {
      title: 'Altas Este Mes',
      value: estadisticas.altasMes,
      icon: <FiBarChart2 />,
      color: 'var(--rr)',
      change: 'Pacientes dados de alta'
    }
  ];

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando panel del psic√≥logo...</div>
      </div>
    );
  }

  return (
    <div className="dashboard-page">
      <div className="page-header">
        <div>
          <h1>Panel del Psic√≥logo</h1>
          <p>Supervisi√≥n y gesti√≥n de pacientes</p>
        </div>
        <button className="btn-secondary" onClick={fetchDashboardData}>
          <FiRefreshCw /> Actualizar
        </button>
      </div>

      {/* Stats Grid */}
      <div className="stats-grid">
        {statCards.map((stat, index) => (
          <div key={index} className="stat-card">
            <div className="stat-header">
              <div className="stat-icon" style={{ color: stat.color }}>
                {stat.icon}
              </div>
              <h3>{stat.title}</h3>
            </div>
            <div className="stat-value">{stat.value}</div>
            <div className="stat-change">{stat.change}</div>
          </div>
        ))}
      </div>

      {/* Main Content Grid */}
      <div className="dashboard-content-grid">
        {/* Citas de Hoy */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Citas de Hoy</h3>
            <button className="btn-text">Ver Agenda</button>
          </div>
          
          <div className="citas-list">
            {citasHoy.map((cita) => (
              <div key={cita.id} className="cita-item">
                <div className="cita-info">
                  <div className="cita-paciente">{cita.paciente}</div>
                  <div className="cita-hora">{cita.hora} ‚Ä¢ {cita.tipo === 'presencial' ? 'Presencial' : 'Virtual'}</div>
                </div>
                <button className="btn-text">Ver</button>
              </div>
            ))}
          </div>
        </div>

        {/* Becarios Asignados */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Becarios en Supervisi√≥n</h3>
            <button className="btn-text">Ver todos</button>
          </div>
          
          <div className="pacientes-list">
            {becarios.map((becario) => (
              <div key={becario.id} className="paciente-item">
                <div className="paciente-info">
                  <div className="paciente-nombre">{becario.nombre}</div>
                  <div className="paciente-fecha">
                    {becario.pacientes} pacientes ‚Ä¢ {becario.observaciones} observaciones
                  </div>
                </div>
                <div className="paciente-progreso">
                  <div className="progress-container">
                    <div 
                      className="progress-bar"
                      style={{ width: `${(becario.observaciones / 10) * 100}%` }}
                    ></div>
                  </div>
                  <span className="progreso-text">
                    {Math.round((becario.observaciones / 10) * 100)}%
                  </span>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Estad√≠sticas Mensuales */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Estad√≠sticas del Mes</h3>
          </div>
          
          <div className="activity-chart">
            <div className="chart-placeholder">
              <div className="chart-bars">
                {[65, 80, 45, 90, 75, 60, 85, 70, 95, 50, 65, 80].map((height, index) => (
                  <div key={index} className="chart-bar">
                    <div 
                      className="bar-fill"
                      style={{ height: `${height}%` }}
                    ></div>
                    <div className="bar-label">
                      {['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'][index]}
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>

        {/* Quick Actions */}
        <div className="dashboard-section">
          <div className="section-header">
            <h3>Acciones R√°pidas</h3>
          </div>
          
          <div className="quick-actions">
            <button className="btn-primary w-100 mb-10">
              Ver Mis Pacientes
            </button>
            <button className="btn-secondary w-100 mb-10">
              Registrar Sesi√≥n
            </button>
            <button className="btn-warning w-100 mb-10">
              Revisar Observaciones
            </button>
            <button className="btn-text w-100">
              Generar Reporte Mensual
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default PsicologoDashboard;

/src\pages\psicologo\ExpedientesPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiSearch, FiFileText, FiCalendar, FiUser, FiPhone, FiMail, FiDownload } from 'react-icons/fi';

const PsicologoExpedientes = () => {
  const [expedientes, setExpedientes] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedExpediente, setSelectedExpediente] = useState(null);
  const [showDetalles, setShowDetalles] = useState(false);

  useEffect(() => {
    fetchExpedientes();
  }, []);

  const fetchExpedientes = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setExpedientes([
          {
            id: 1,
            paciente_nombre: 'Carlos G√≥mez',
            edad: 25,
            fecha_ingreso: '2023-10-15',
            diagnostico: 'Trastorno de ansiedad generalizada',
            motivo_consulta: 'Ansiedad acad√©mica',
            antecedentes: 'No significativos',
            tratamiento_actual: 'Terapia cognitivo-conductual',
            medicacion: 'No',
            ultima_evaluacion: '2024-01-10',
            proxima_cita: '2024-01-17',
            sesiones_totales: 8,
            evolucion: 'Mejor√≠a progresiva en manejo de ansiedad'
          },
          {
            id: 2,
            paciente_nombre: 'Mariana L√≥pez',
            edad: 28,
            fecha_ingreso: '2023-09-20',
            diagnostico: 'S√≠ndrome de burnout',
            motivo_consulta: 'Estr√©s laboral',
            antecedentes: 'Antecedentes familiares de ansiedad',
            tratamiento_actual: 'Terapia de aceptaci√≥n y compromiso',
            medicacion: 'No',
            ultima_evaluacion: '2024-01-09',
            proxima_cita: '2024-01-16',
            sesiones_totales: 12,
            evolucion: 'Mejor manejo de l√≠mites laborales'
          }
        ]);
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al obtener expedientes:', error);
      setLoading(false);
    }
  };

  const filteredExpedientes = expedientes.filter(expediente =>
    expediente.paciente_nombre.toLowerCase().includes(searchTerm.toLowerCase()) ||
    expediente.diagnostico.toLowerCase().includes(searchTerm.toLowerCase())
  );

  const showExpedienteDetalles = (expediente) => {
    setSelectedExpediente(expediente);
    setShowDetalles(true);
  };

  const exportarExpediente = (expediente) => {
    // Simulaci√≥n de exportaci√≥n
    alert(`Exportando expediente de ${expediente.paciente_nombre}...`);
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando expedientes...</div>
      </div>
    );
  }

  return (
    <div className="configuracion-page">
      <div className="page-header">
        <div>
          <h1>Expedientes Cl√≠nicos</h1>
          <p>Historial cl√≠nico completo de pacientes</p>
        </div>
      </div>

      {/* B√∫squeda */}
      <div className="search-box mb-20">
        <FiSearch />
        <input
          type="text"
          className="search-input"
          placeholder="Buscar expediente por nombre o diagn√≥stico..."
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
        />
      </div>

      {/* Lista de Expedientes */}
      <div className="grid-2 gap-20">
        {filteredExpedientes.map((expediente) => (
          <div key={expediente.id} className="card">
            <div className="flex-row align-center justify-between mb-10">
              <div className="flex-row align-center gap-10">
                <div className="avatar">
                  {expediente.paciente_nombre.split(' ').map(n => n[0]).join('')}
                </div>
                <div>
                  <h3>{expediente.paciente_nombre}</h3>
                  <p className="text-small">{expediente.edad} a√±os</p>
                </div>
              </div>
              <button 
                className="btn-text"
                onClick={() => exportarExpediente(expediente)}
                title="Exportar expediente"
              >
                <FiDownload />
              </button>
            </div>

            <div className="mb-10">
              <p><strong>Diagn√≥stico:</strong> {expediente.diagnostico}</p>
              <p><strong>Tratamiento:</strong> {expediente.tratamiento_actual}</p>
              <p><strong>Sesiones totales:</strong> {expediente.sesiones_totales}</p>
            </div>

            <div className="flex-row gap-10">
              <button 
                className="btn-primary flex-1"
                onClick={() => showExpedienteDetalles(expediente)}
              >
                <FiFileText /> Ver Expediente
              </button>
            </div>
          </div>
        ))}
      </div>

      {/* Modal de Detalles del Expediente */}
      {showDetalles && selectedExpediente && (
        <div className="modal-overlay">
          <div className="modal-container modal-large">
            <div className="modal-header">
              <h3>Expediente Cl√≠nico de {selectedExpediente.paciente_nombre}</h3>
              <button className="modal-close" onClick={() => setShowDetalles(false)}>√ó</button>
            </div>
            
            <div className="modal-content">
              <div className="grid-2 gap-20">
                <div>
                  <h4>Datos Generales</h4>
                  <div className="detail-row">
                    <strong>Paciente:</strong> {selectedExpediente.paciente_nombre}
                  </div>
                  <div className="detail-row">
                    <strong>Edad:</strong> {selectedExpediente.edad} a√±os
                  </div>
                  <div className="detail-row">
                    <strong>Fecha de ingreso:</strong> {new Date(selectedExpediente.fecha_ingreso).toLocaleDateString()}
                  </div>
                  <div className="detail-row">
                    <strong>Motivo de consulta:</strong> {selectedExpediente.motivo_consulta}
                  </div>
                </div>
                
                <div>
                  <h4>Informaci√≥n Cl√≠nica</h4>
                  <div className="detail-row">
                    <strong>Diagn√≥stico:</strong> {selectedExpediente.diagnostico}
                  </div>
                  <div className="detail-row">
                    <strong>Antecedentes:</strong> {selectedExpediente.antecedentes}
                  </div>
                  <div className="detail-row">
                    <strong>Tratamiento actual:</strong> {selectedExpediente.tratamiento_actual}
                  </div>
                  <div className="detail-row">
                    <strong>Medicaci√≥n:</strong> {selectedExpediente.medicacion}
                  </div>
                </div>
              </div>
              
              <div className="mt-20">
                <h4>Evoluci√≥n y Seguimiento</h4>
                <div className="detail-row">
                  <strong>Evoluci√≥n cl√≠nica:</strong> {selectedExpediente.evolucion}
                </div>
                <div className="detail-row">
                  <strong>Sesiones totales:</strong> {selectedExpediente.sesiones_totales}
                </div>
                <div className="detail-row">
                  <strong>√öltima evaluaci√≥n:</strong> {new Date(selectedExpediente.ultima_evaluacion).toLocaleDateString()}
                </div>
                <div className="detail-row">
                  <strong>Pr√≥xima cita:</strong> {selectedExpediente.proxima_cita ? new Date(selectedExpediente.proxima_cita).toLocaleDateString() : 'No programada'}
                </div>
              </div>
              
              <div className="mt-20">
                <h4>Historial de Sesiones</h4>
                <div className="timeline mt-10">
                  <div className="timeline-item">
                    <div className="timeline-content">
                      <strong>2024-01-10 - Sesi√≥n 8</strong>
                      <p>Continuaci√≥n trabajo en exposici√≥n gradual. Paciente reporta menor ansiedad anticipatoria.</p>
                    </div>
                  </div>
                  <div className="timeline-item">
                    <div className="timeline-content">
                      <strong>2024-01-03 - Sesi√≥n 7</strong>
                      <p>Introducci√≥n de t√©cnicas de exposici√≥n. Paciente colaborador y motivado.</p>
                    </div>
                  </div>
                  <div className="timeline-item">
                    <div className="timeline-content">
                      <strong>2023-12-27 - Sesi√≥n 6</strong>
                      <p>Revisi√≥n de tareas. Buen progreso en identificaci√≥n de pensamientos autom√°ticos.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div className="modal-footer">
              <button className="btn-secondary" onClick={() => setShowDetalles(false)}>
                Cerrar
              </button>
              <button className="btn-primary" onClick={() => exportarExpediente(selectedExpediente)}>
                <FiDownload /> Exportar Expediente
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default PsicologoExpedientes;

/src\pages\psicologo\PacientesPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiSearch, FiUser, FiCalendar, FiPhone, FiMail, FiFileText, FiFilter } from 'react-icons/fi';

const PsicologoPacientes = () => {
  const [pacientes, setPacientes] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedPaciente, setSelectedPaciente] = useState(null);
  const [showDetalles, setShowDetalles] = useState(false);
  const [filterEstado, setFilterEstado] = useState('');

  useEffect(() => {
    fetchPacientes();
  }, []);

  const fetchPacientes = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setPacientes([
          {
            id: 1,
            nombre: 'Carlos G√≥mez',
            edad: 25,
            telefono: '555-1234',
            email: 'carlos@email.com',
            motivo_consulta: 'Ansiedad acad√©mica',
            diagnostico: 'Trastorno de ansiedad generalizada',
            ultima_sesion: '2024-01-10',
            proxima_cita: '2024-01-17',
            sesiones_completadas: 8,
            estado: 'activo',
            becario: 'Juan P√©rez'
          },
          {
            id: 2,
            nombre: 'Mariana L√≥pez',
            edad: 28,
            telefono: '555-5678',
            email: 'mariana@email.com',
            motivo_consulta: 'Estr√©s laboral',
            diagnostico: 'S√≠ndrome de burnout',
            ultima_sesion: '2024-01-09',
            proxima_cita: '2024-01-16',
            sesiones_completadas: 12,
            estado: 'activo',
            becario: 'Sof√≠a Ram√≠rez'
          },
          {
            id: 3,
            nombre: 'Roberto S√°nchez',
            edad: 22,
            telefono: '555-9012',
            email: 'roberto@email.com',
            motivo_consulta: 'Problemas de adaptaci√≥n',
            diagnostico: 'Trastorno adaptativo',
            ultima_sesion: '2024-01-08',
            proxima_cita: '2024-01-15',
            sesiones_completadas: 5,
            estado: 'activo',
            becario: null
          },
          {
            id: 4,
            nombre: 'Ana Rodr√≠guez',
            edad: 35,
            telefono: '555-3456',
            email: 'ana@email.com',
            motivo_consulta: 'Depresi√≥n',
            diagnostico: 'Episodio depresivo moderado',
            ultima_sesion: '2024-01-05',
            proxima_cita: null,
            sesiones_completadas: 20,
            estado: 'alta_terapeutica',
            becario: 'Juan P√©rez'
          }
        ]);
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al obtener pacientes:', error);
      setLoading(false);
    }
  };

  const filteredPacientes = pacientes.filter(paciente => {
    const matchesSearch = 
      paciente.nombre.toLowerCase().includes(searchTerm.toLowerCase()) ||
      paciente.email.toLowerCase().includes(searchTerm.toLowerCase()) ||
      paciente.diagnostico.toLowerCase().includes(searchTerm.toLowerCase());
    
    const matchesEstado = !filterEstado || paciente.estado === filterEstado;
    
    return matchesSearch && matchesEstado;
  });

  const showPacienteDetalles = (paciente) => {
    setSelectedPaciente(paciente);
    setShowDetalles(true);
  };

  const getEstadoLabel = (estado) => {
    switch (estado) {
      case 'activo':
        return { text: 'Activo', color: 'success' };
      case 'alta_terapeutica':
        return { text: 'Alta Terap√©utica', color: 'primary' };
      case 'abandono':
        return { text: 'Abandono', color: 'danger' };
      default:
        return { text: estado, color: 'warning' };
    }
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando pacientes...</div>
      </div>
    );
  }

  return (
    <div className="pacientes-page">
      <div className="page-header">
        <div>
          <h1>Mis Pacientes</h1>
          <p>Gesti√≥n de pacientes en tratamiento</p>
        </div>
      </div>

      {/* Filtros y B√∫squeda */}
      <div className="filters-container mb-20">
        <div className="search-box">
          <FiSearch />
          <input
            type="text"
            className="search-input"
            placeholder="Buscar paciente por nombre, email o diagn√≥stico..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
          />
        </div>
        
        <div className="filter-buttons">
          <select 
            value={filterEstado} 
            onChange={(e) => setFilterEstado(e.target.value)}
            className="select-field"
            style={{ width: '200px' }}
          >
            <option value="">Todos los estados</option>
            <option value="activo">Activos</option>
            <option value="alta_terapeutica">Altas Terap√©uticas</option>
            <option value="abandono">Abandonos</option>
          </select>
        </div>
      </div>

      {/* Tabla de Pacientes */}
      <div className="table-container">
        <table className="data-table">
          <thead>
            <tr>
              <th>Paciente</th>
              <th>Contacto</th>
              <th>Diagn√≥stico</th>
              <th>Sesiones</th>
              <th>√öltima Sesi√≥n</th>
              <th>Becario</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {filteredPacientes.map((paciente) => {
              const estadoInfo = getEstadoLabel(paciente.estado);
              
              return (
                <tr key={paciente.id}>
                  <td>
                    <div className="flex-row align-center gap-10">
                      <div className="avatar">
                        {paciente.nombre.split(' ').map(n => n[0]).join('')}
                      </div>
                      <div>
                        <div className="font-bold">{paciente.nombre}</div>
                        <div className="text-small">{paciente.edad} a√±os</div>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div>{paciente.email}</div>
                    <div className="text-small">{paciente.telefono}</div>
                  </td>
                  <td>
                    <div className="diagnostico-tag">{paciente.diagnostico}</div>
                  </td>
                  <td>
                    <div className="font-bold">{paciente.sesiones_completadas}</div>
                    <div className="text-small">sesiones</div>
                  </td>
                  <td>
                    {paciente.ultima_sesion ? new Date(paciente.ultima_sesion).toLocaleDateString() : 'N/A'}
                  </td>
                  <td>
                    {paciente.becario || 'Sin asignar'}
                  </td>
                  <td>
                    <span className={`badge badge-${estadoInfo.color}`}>
                      {estadoInfo.text}
                    </span>
                  </td>
                  <td>
                    <div className="flex-row gap-5">
                      <button 
                        className="btn-text"
                        onClick={() => showPacienteDetalles(paciente)}
                        title="Ver detalles"
                      >
                        <FiFileText />
                      </button>
                      <button 
                        className="btn-text"
                        title="Agendar cita"
                      >
                        <FiCalendar />
                      </button>
                    </div>
                  </td>
                </tr>
              );
            })}
          </tbody>
        </table>
      </div>

      {/* Resumen */}
      <div className="grid-3 mt-20">
        <div className="card">
          <h4>Resumen de Pacientes</h4>
          <div className="mt-10">
            <p>Total: {pacientes.length}</p>
            <p>Activos: {pacientes.filter(p => p.estado === 'activo').length}</p>
            <p>Con becario: {pacientes.filter(p => p.becario).length}</p>
          </div>
        </div>
        
        <div className="card">
          <h4>Sesiones Totales</h4>
          <div className="mt-10">
            <p className="stat-value">{pacientes.reduce((sum, p) => sum + p.sesiones_completadas, 0)}</p>
            <p className="text-small">sesiones realizadas</p>
          </div>
        </div>
        
        <div className="card">
          <h4>Acciones</h4>
          <div className="mt-10 flex-col gap-10">
            <button className="btn-primary w-100">
              Agendar Cita Grupal
            </button>
            <button className="btn-secondary w-100">
              Generar Reporte
            </button>
          </div>
        </div>
      </div>

      {/* Modal de Detalles */}
      {showDetalles && selectedPaciente && (
        <div className="modal-overlay">
          <div className="modal-container modal-large">
            <div className="modal-header">
              <h3>Expediente de {selectedPaciente.nombre}</h3>
              <button className="modal-close" onClick={() => setShowDetalles(false)}>√ó</button>
            </div>
            
            <div className="modal-content">
              <div className="grid-2 gap-20">
                <div>
                  <h4>Datos Personales</h4>
                  <div className="detail-row">
                    <strong>Nombre:</strong> {selectedPaciente.nombre}
                  </div>
                  <div className="detail-row">
                    <strong>Edad:</strong> {selectedPaciente.edad} a√±os
                  </div>
                  <div className="detail-row">
                    <strong>Contacto:</strong> {selectedPaciente.telefono} ‚Ä¢ {selectedPaciente.email}
                  </div>
                  <div className="detail-row">
                    <strong>Motivo de consulta:</strong> {selectedPaciente.motivo_consulta}
                  </div>
                </div>
                
                <div>
                  <h4>Informaci√≥n Cl√≠nica</h4>
                  <div className="detail-row">
                    <strong>Diagn√≥stico:</strong> {selectedPaciente.diagnostico}
                  </div>
                  <div className="detail-row">
                    <strong>Estado:</strong> 
                    <span className={`badge badge-${getEstadoLabel(selectedPaciente.estado).color} ml-10`}>
                      {getEstadoLabel(selectedPaciente.estado).text}
                    </span>
                  </div>
                  <div className="detail-row">
                    <strong>Sesiones completadas:</strong> {selectedPaciente.sesiones_completadas}
                  </div>
                  <div className="detail-row">
                    <strong>Becario asignado:</strong> {selectedPaciente.becario || 'No asignado'}
                  </div>
                </div>
              </div>
              
              <div className="mt-20">
                <h4>Historial de Sesiones</h4>
                <div className="table-container mt-10">
                  <table className="data-table">
                    <thead>
                      <tr>
                        <th>Fecha</th>
                        <th>Tipo</th>
                        <th>Duraci√≥n</th>
                        <th>Observaciones</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>{new Date(selectedPaciente.ultima_sesion).toLocaleDateString()}</td>
                        <td>Presencial</td>
                        <td>50 min</td>
                        <td>Avance en t√©cnicas de relajaci√≥n</td>
                      </tr>
                      <tr>
                        <td>2024-01-03</td>
                        <td>Virtual</td>
                        <td>45 min</td>
                        <td>Trabajo en identificaci√≥n de pensamientos autom√°ticos</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            
            <div className="modal-footer">
              <button className="btn-secondary" onClick={() => setShowDetalles(false)}>
                Cerrar
              </button>
              <button className="btn-primary">
                Agendar Nueva Sesi√≥n
              </button>
              <button className="btn-warning">
                Registrar Sesi√≥n
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default PsicologoPacientes;

/src\pages\psicologo\SesionesPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiCalendar, FiUser, FiFileText, FiPlus, FiEdit2, FiSave } from 'react-icons/fi';

const PsicologoSesiones = () => {
  const [sesiones, setSesiones] = useState([]);
  const [loading, setLoading] = useState(true);
  const [showForm, setShowForm] = useState(false);
  const [formData, setFormData] = useState({
    paciente_id: '',
    fecha: new Date().toISOString().split('T')[0],
    hora_inicio: '10:00',
    hora_fin: '11:00',
    motivo_consulta: '',
    contenido_sesion: '',
    observaciones: '',
    tareas_asignadas: '',
    proxima_sesion: ''
  });
  const [pacientes, setPacientes] = useState([]);

  useEffect(() => {
    fetchData();
  }, []);

  const fetchData = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setPacientes([
          { id: 1, nombre: 'Carlos G√≥mez' },
          { id: 2, nombre: 'Mariana L√≥pez' },
          { id: 3, nombre: 'Roberto S√°nchez' }
        ]);
        
        setSesiones([
          {
            id: 1,
            paciente_nombre: 'Carlos G√≥mez',
            fecha: '2024-01-10',
            hora_inicio: '10:00',
            hora_fin: '11:00',
            motivo_consulta: 'Ansiedad acad√©mica',
            contenido_sesion: 'Exposici√≥n gradual a situaciones acad√©micas estresantes',
            observaciones: 'Paciente mostr√≥ buena disposici√≥n y colaboraci√≥n',
            tareas_asignadas: 'Practicar t√©cnicas de relajaci√≥n 10 min/d√≠a',
            proxima_sesion: '2024-01-17'
          },
          {
            id: 2,
            paciente_nombre: 'Mariana L√≥pez',
            fecha: '2024-01-09',
            hora_inicio: '11:30',
            hora_fin: '12:15',
            motivo_consulta: 'Estr√©s laboral',
            contenido_sesion: 'Trabajo en establecimiento de l√≠mites laborales',
            observaciones: 'Paciente reporta mejor manejo de situaciones laborales',
            tareas_asignadas: 'Registrar situaciones estresantes en el trabajo',
            proxima_sesion: '2024-01-16'
          }
        ]);
        
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al cargar datos:', error);
      setLoading(false);
    }
  };

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData({
      ...formData,
      [name]: value
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    
    const nuevaSesion = {
      id: sesiones.length + 1,
      paciente_nombre: pacientes.find(p => p.id == formData.paciente_id)?.nombre || 'Paciente',
      ...formData
    };
    
    setSesiones([nuevaSesion, ...sesiones]);
    setShowForm(false);
    resetForm();
    
    alert('Sesi√≥n registrada exitosamente');
  };

  const resetForm = () => {
    setFormData({
      paciente_id: '',
      fecha: new Date().toISOString().split('T')[0],
      hora_inicio: '10:00',
      hora_fin: '11:00',
      motivo_consulta: '',
      contenido_sesion: '',
      observaciones: '',
      tareas_asignadas: '',
      proxima_sesion: ''
    });
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando sesiones...</div>
      </div>
    );
  }

  return (
    <div className="configuracion-page">
      <div className="page-header">
        <div>
          <h1>Registro de Sesiones</h1>
          <p>Registro detallado de sesiones terap√©uticas</p>
        </div>
        <button 
          className="btn-primary"
          onClick={() => setShowForm(true)}
        >
          <FiPlus /> Nueva Sesi√≥n
        </button>
      </div>

      {/* Formulario de Nueva Sesi√≥n */}
      {showForm && (
        <div className="card mb-20">
          <div className="modal-header">
            <h3>Registrar Nueva Sesi√≥n</h3>
            <button className="modal-close" onClick={() => setShowForm(false)}>√ó</button>
          </div>
          
          <form onSubmit={handleSubmit}>
            <div className="form-grid">
              <div className="form-group">
                <label>Paciente</label>
                <select
                  name="paciente_id"
                  value={formData.paciente_id}
                  onChange={handleInputChange}
                  className="select-field"
                  required
                >
                  <option value="">Seleccionar paciente</option>
                  {pacientes.map(paciente => (
                    <option key={paciente.id} value={paciente.id}>
                      {paciente.nombre}
                    </option>
                  ))}
                </select>
              </div>
              
              <div className="form-group">
                <label>Fecha de sesi√≥n</label>
                <input
                  type="date"
                  name="fecha"
                  value={formData.fecha}
                  onChange={handleInputChange}
                  className="input-field"
                  required
                />
              </div>
              
              <div className="form-group">
                <label>Hora inicio</label>
                <input
                  type="time"
                  name="hora_inicio"
                  value={formData.hora_inicio}
                  onChange={handleInputChange}
                  className="input-field"
                  required
                />
              </div>
              
              <div className="form-group">
                <label>Hora fin</label>
                <input
                  type="time"
                  name="hora_fin"
                  value={formData.hora_fin}
                  onChange={handleInputChange}
                  className="input-field"
                  required
                />
              </div>
              
              <div className="form-group" style={{ gridColumn: 'span 2' }}>
                <label>Motivo de consulta</label>
                <input
                  type="text"
                  name="motivo_consulta"
                  value={formData.motivo_consulta}
                  onChange={handleInputChange}
                  className="input-field"
                  required
                  placeholder="Motivo principal de la sesi√≥n"
                />
              </div>
              
              <div className="form-group" style={{ gridColumn: 'span 2' }}>
                <label>Contenido de la sesi√≥n</label>
                <textarea
                  name="contenido_sesion"
                  value={formData.contenido_sesion}
                  onChange={handleInputChange}
                  className="textarea-field"
                  rows="4"
                  required
                  placeholder="Descripci√≥n detallada de lo trabajado en la sesi√≥n..."
                />
              </div>
              
              <div className="form-group">
                <label>Observaciones</label>
                <textarea
                  name="observaciones"
                  value={formData.observaciones}
                  onChange={handleInputChange}
                  className="textarea-field"
                  rows="3"
                  placeholder="Observaciones relevantes del paciente..."
                />
              </div>
              
              <div className="form-group">
                <label>Tareas asignadas</label>
                <textarea
                  name="tareas_asignadas"
                  value={formData.tareas_asignadas}
                  onChange={handleInputChange}
                  className="textarea-field"
                  rows="3"
                  placeholder="Tareas o ejercicios para el paciente..."
                />
              </div>
              
              <div className="form-group">
                <label>Pr√≥xima sesi√≥n</label>
                <input
                  type="date"
                  name="proxima_sesion"
                  value={formData.proxima_sesion}
                  onChange={handleInputChange}
                  className="input-field"
                  placeholder="Fecha de pr√≥xima sesi√≥n"
                />
              </div>
            </div>
            
            <div className="form-actions">
              <button type="submit" className="btn-primary">
                <FiSave /> Guardar Sesi√≥n
              </button>
              <button 
                type="button" 
                className="btn-danger"
                onClick={() => {
                  setShowForm(false);
                  resetForm();
                }}
              >
                Cancelar
              </button>
            </div>
          </form>
        </div>
      )}

      {/* Lista de Sesiones Registradas */}
      <div className="config-content">
        <h3>Sesiones Registradas</h3>
        
        {sesiones.length > 0 ? (
          <div className="sesiones-list">
            {sesiones.map((sesion) => (
              <div key={sesion.id} className="accordion">
                <div className="accordion-header">
                  <div className="flex-row align-center gap-10">
                    <FiCalendar />
                    <span>{new Date(sesion.fecha).toLocaleDateString()}</span>
                  </div>
                  <div className="flex-row align-center gap-10">
                    <FiUser />
                    <span>{sesion.paciente_nombre}</span>
                  </div>
                  <div className="flex-row align-center gap-10">
                    <span>{sesion.hora_inicio} - {sesion.hora_fin}</span>
                  </div>
                </div>
                
                <div className="accordion-content">
                  <div className="grid-2 gap-20">
                    <div>
                      <h4>Motivo de consulta</h4>
                      <p>{sesion.motivo_consulta}</p>
                      
                      <h4 className="mt-10">Contenido de la sesi√≥n</h4>
                      <p>{sesion.contenido_sesion}</p>
                    </div>
                    
                    <div>
                      <h4>Observaciones</h4>
                      <p>{sesion.observaciones}</p>
                      
                      <h4 className="mt-10">Tareas asignadas</h4>
                      <p>{sesion.tareas_asignadas}</p>
                      
                      {sesion.proxima_sesion && (
                        <>
                          <h4 className="mt-10">Pr√≥xima sesi√≥n</h4>
                          <p>{new Date(sesion.proxima_sesion).toLocaleDateString()}</p>
                        </>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        ) : (
          <div className="no-citas">
            <div className="no-citas-icon">üìã</div>
            <div>No hay sesiones registradas</div>
            <p className="text-small mt-10">
              Registra las sesiones terap√©uticas para mantener un historial completo.
            </p>
            <button 
              className="btn-text mt-10"
              onClick={() => setShowForm(true)}
            >
              <FiPlus /> Registrar tu primera sesi√≥n
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default PsicologoSesiones;

/src\pages\psicologo\SupervisionPage.js:
--------------------------------------------------------------------------------
import React, { useState, useEffect } from 'react';
import { FiUser, FiFileText, FiCalendar, FiMessageSquare, FiCheckCircle, FiAlertCircle } from 'react-icons/fi';

const PsicologoSupervision = () => {
  const [becarios, setBecarios] = useState([]);
  const [observaciones, setObservaciones] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedBecario, setSelectedBecario] = useState(null);
  const [showFeedback, setShowFeedback] = useState(false);
  const [feedback, setFeedback] = useState('');

  useEffect(() => {
    fetchData();
  }, []);

  const fetchData = async () => {
    try {
      // Simulaci√≥n de datos
      setTimeout(() => {
        setBecarios([
          {
            id: 1,
            nombre: 'Juan P√©rez',
            email: 'becario1@psicogestion.com',
            fecha_inicio: '2023-09-01',
            pacientes_asignados: 3,
            sesiones_supervisadas: 15,
            observaciones_pendientes: 2,
            ultima_supervision: '2024-01-08'
          },
          {
            id: 2,
            nombre: 'Sof√≠a Ram√≠rez',
            email: 'becario2@psicogestion.com',
            fecha_inicio: '2023-10-15',
            pacientes_asignados: 2,
            sesiones_supervisadas: 8,
            observaciones_pendientes: 1,
            ultima_supervision: '2024-01-05'
          }
        ]);
        
        setObservaciones([
          {
            id: 1,
            becario_nombre: 'Juan P√©rez',
            paciente_nombre: 'Carlos G√≥mez',
            fecha: '2024-01-10',
            contenido: 'El becario mostr√≥ buena empat√≠a y habilidades de escucha activa.',
            areas_mejora: 'Necesita trabajar en el manejo de silencios inc√≥modos.',
            feedback: 'Excelente manejo de la exposici√≥n gradual.',
            estado: 'revisada'
          },
          {
            id: 2,
            becario_nombre: 'Sof√≠a Ram√≠rez',
            paciente_nombre: 'Mariana L√≥pez',
            fecha: '2024-01-09',
            contenido: 'Buen trabajo en el establecimiento de l√≠mites laborales.',
            areas_mejora: 'Podr√≠a profundizar m√°s en el an√°lisis de pensamientos autom√°ticos.',
            feedback: '',
            estado: 'pendiente'
          }
        ]);
        
        setLoading(false);
      }, 1000);
    } catch (error) {
      console.error('Error al cargar datos:', error);
      setLoading(false);
    }
  };

  const enviarFeedback = (becarioId) => {
    if (!feedback.trim()) {
      alert('Por favor, escribe alg√∫n feedback');
      return;
    }
    
    // Aqu√≠ se enviar√≠a al backend
    alert(`Feedback enviado a ${becarios.find(b => b.id === becarioId)?.nombre}`);
    setFeedback('');
    setShowFeedback(false);
  };

  const getBecarioObservaciones = (becarioId) => {
    return observaciones.filter(obs => 
      obs.becario_nombre === becarios.find(b => b.id === becarioId)?.nombre
    );
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <div className="loading-text">Cargando supervisi√≥n...</div>
      </div>
    );
  }

  return (
    <div className="configuracion-page">
      <div className="page-header">
        <div>
          <h1>Supervisi√≥n de Becarios</h1>
          <p>Gesti√≥n y seguimiento de becarios en formaci√≥n</p>
        </div>
      </div>

      {/* Lista de Becarios */}
      <div className="config-content">
        <h3>Becarios en Supervisi√≥n</h3>
        
        <div className="grid-2 gap-20 mt-20">
          {becarios.map((becario) => {
            const becarioObservaciones = getBecarioObservaciones(becario.id);
            const observacionesPendientes = becarioObservaciones.filter(o => o.estado === 'pendiente').length;
            
            return (
              <div key={becario.id} className="card">
                <div className="flex-row align-center justify-between mb-10">
                  <div className="flex-row align-center gap-10">
                    <div className="avatar">
                      {becario.nombre.split(' ').map(n => n[0]).join('')}
                    </div>
                    <div>
                      <h3>{becario.nombre}</h3>
                      <p className="text-small">{becario.email}</p>
                    </div>
                  </div>
                  {observacionesPendientes > 0 && (
                    <span className="badge badge-warning">
                      {observacionesPendientes} pendientes
                    </span>
                  )}
                </div>

                <div className="mb-10">
                  <div className="grid-2 gap-10">
                    <div>
                      <p><strong>Pacientes:</strong> {becario.pacientes_asignados}</p>
                      <p><strong>Sesiones:</strong> {becario.sesiones_supervisadas}</p>
                    </div>
                    <div>
                      <p><strong>Inicio:</strong> {new Date(becario.fecha_inicio).toLocaleDateString()}</p>
                      <p><strong>√öltima supervisi√≥n:</strong> {new Date(becario.ultima_supervision).toLocaleDateString()}</p>
                    </div>
                  </div>
                </div>

                <div className="flex-row gap-10">
                  <button 
                    className="btn-primary flex-1"
                    onClick={() => {
                      setSelectedBecario(becario);
                      setShowFeedback(true);
                    }}
                  >
                    <FiMessageSquare /> Dar Feedback
                  </button>
                  <button className="btn-text">
                    <FiFileText /> Ver Observaciones
                  </button>
                </div>
              </div>
            );
          })}
        </div>

        {/* Observaciones de Becarios */}
        <div className="mt-30">
          <h3>Observaciones Recientes</h3>
          
          <div className="observaciones-list mt-10">
            {observaciones.map((obs) => (
              <div key={obs.id} className="accordion">
                <div className="accordion-header">
                  <div className="flex-row align-center gap-10">
                    <FiCalendar />
                    <span>{new Date(obs.fecha).toLocaleDateString()}</span>
                  </div>
                  <div className="flex-row align-center gap-10">
                    <FiUser />
                    <span>{obs.becario_nombre} ‚Üí {obs.paciente_nombre}</span>
                  </div>
                  <div className={`badge ${
                    obs.estado === 'revisada' ? 'badge-success' : 'badge-warning'
                  }`}>
                    {obs.estado === 'revisada' ? 'Revisada' : 'Pendiente'}
                  </div>
                </div>
                
                <div className="accordion-content">
                  <div className="grid-2 gap-20">
                    <div>
                      <h4>Observaciones</h4>
                      <p>{obs.contenido}</p>
                      
                      <h4 className="mt-10">√Åreas de mejora</h4>
                      <p>{obs.areas_mejora}</p>
                    </div>
                    
                    <div>
                      <h4>Feedback del supervisor</h4>
                      {obs.feedback ? (
                        <p>{obs.feedback}</p>
                      ) : (
                        <p className="text-danger">Sin feedback a√∫n</p>
                      )}
                      
                      <button 
                        className="btn-text mt-10"
                        onClick={() => {
                          setSelectedBecario(becarios.find(b => b.nombre === obs.becario_nombre));
                          setShowFeedback(true);
                        }}
                      >
                        <FiMessageSquare /> {obs.feedback ? 'Editar Feedback' : 'Agregar Feedback'}
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Estad√≠sticas */}
        <div className="grid-3 mt-30 gap-20">
          <div className="card">
            <h4>Resumen de Supervisi√≥n</h4>
            <div className="mt-10">
              <p>Total becarios: {becarios.length}</p>
              <p>Observaciones pendientes: {observaciones.filter(o => o.estado === 'pendiente').length}</p>
              <p>Sesiones supervisadas: {becarios.reduce((sum, b) => sum + b.sesiones_supervisadas, 0)}</p>
            </div>
          </div>
          
          <div className="card">
            <h4>Pr√≥ximas Supervisiones</h4>
            <div className="mt-10">
              <p>Juan P√©rez: 2024-01-15</p>
              <p>Sof√≠a Ram√≠rez: 2024-01-12</p>
              <p className="text-small mt-10">Agenda programada</p>
            </div>
          </div>
          
          <div className="card">
            <h4>Acciones</h4>
            <div className="mt-10 flex-col gap-10">
              <button className="btn-primary w-100">
                Programar Supervisi√≥n
              </button>
              <button className="btn-secondary w-100">
                Generar Informe
              </button>
            </div>
          </div>
        </div>
      </div>

      {/* Modal para Feedback */}
      {showFeedback && selectedBecario && (
        <div className="modal-overlay">
          <div className="modal-container">
            <div className="modal-header">
              <h3>Feedback para {selectedBecario.nombre}</h3>
              <button className="modal-close" onClick={() => setShowFeedback(false)}>√ó</button>
            </div>
            
            <div className="modal-content">
              <div className="form-group">
                <label>Escribe tu feedback</label>
                <textarea
                  value={feedback}
                  onChange={(e) => setFeedback(e.target.value)}
                  className="textarea-field"
                  rows="6"
                  placeholder="Comparte tus observaciones, sugerencias y √°reas de mejora..."
                />
              </div>
              
              <div className="mt-10">
                <p className="text-small">
                  <FiAlertCircle /> El feedback debe ser constructivo y espec√≠fico.
                </p>
              </div>
            </div>
            
            <div className="modal-footer">
              <button 
                className="btn-secondary"
                onClick={() => setShowFeedback(false)}
              >
                Cancelar
              </button>
              <button 
                className="btn-primary"
                onClick={() => enviarFeedback(selectedBecario.id)}
              >
                <FiCheckCircle /> Enviar Feedback
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default PsicologoSupervision;